import{B as ve,C as de,D as ye,E as je,s as Ne,r as n,F as ke,G as Ce,H as ae,j as e,A as $,m as g,P as _e,I as Se,J as Le,K as Re,L as Pe,N as Ue}from"./index-DJmtuQok-1765669972031.js";import{m as Ee,a as ze}from"./moderation-Cyx-wVK9-1765669972031.js";import{T as Me}from"./triangle-alert-BN3Iuzfz-1765669972031.js";import{X as re}from"./x-C9lmtDM5-1765669972031.js";import{A as Te}from"./arrow-right-BeIcDV_l-1765669972031.js";import{L as ie}from"./loader-circle-BFGaG1cN-1765669972031.js";import{I as Fe}from"./image-BSobyRfa-1765669972031.js";import{P as le}from"./play-wzUmNWA5-1765669972031.js";import{C as Oe}from"./chevron-left-BFr1GXrW-1765669972031.js";import{G as oe}from"./globe-DNUq3nxX-1765669972031.js";import{U as ne}from"./users-BFryXZxW-1765669972031.js";import{S as ce}from"./star-DJiQIobU-1765669972031.js";import{C as Ve}from"./chevron-down-C4rX2dTk-1765669972031.js";import{C as Ie}from"./check-D9wvhmfj-1765669972031.js";function $e(r){r.values.forEach(a=>a.stop())}function H(r,a){[...a].reverse().forEach(u=>{const b=r.getVariant(u);b&&de(r,b),r.variantChildren&&r.variantChildren.forEach(h=>{H(h,a)})})}function Ae(r,a){if(Array.isArray(a))return H(r,a);if(typeof a=="string")return H(r,[a]);de(r,a)}function De(){const r=new Set,a={subscribe(l){return r.add(l),()=>void r.delete(l)},start(l,u){const b=[];return r.forEach(h=>{b.push(ve(h,l,{transitionOverride:u}))}),Promise.all(b)},set(l){return r.forEach(u=>{Ae(u,l)})},stop(){r.forEach(l=>{$e(l)})},mount(){return()=>{a.stop()}}};return a}function Be(){const r=ye(De);return je(r.mount,[]),r}const We=Be;async function Ge(r,a,l,u,b){try{const{data:h,error:L}=await Ne.rpc("create_story",{p_user_id:r,p_media_url:a,p_media_type:l,p_thumbnail_url:u||null,p_duration:b||null});return L?(console.error("[Stories] Create error:",L),null):h}catch(h){return console.error("[Stories] Create exception:",h),null}}const G=[{id:"normal",name:"Normal",filter:"none"},{id:"vivid",name:"Vivid",filter:"saturate(1.3) contrast(1.1)"},{id:"warm",name:"Warm",filter:"sepia(0.2) saturate(1.1) brightness(1.05)"},{id:"cool",name:"Cool",filter:"saturate(0.9) hue-rotate(10deg) brightness(1.05)"},{id:"bw",name:"B&W",filter:"grayscale(1) contrast(1.1)"},{id:"vintage",name:"Vintage",filter:"sepia(0.4) contrast(0.9) brightness(0.95)"},{id:"fade",name:"Fade",filter:"contrast(0.85) brightness(1.1) saturate(0.8)"},{id:"dramatic",name:"Dramatic",filter:"contrast(1.3) saturate(1.2) brightness(0.95)"},{id:"noir",name:"Noir",filter:"grayscale(1) contrast(1.4) brightness(0.9)"}];function He(r){return new Promise(a=>{const l=document.createElement("img");l.onload=()=>{a({width:l.naturalWidth,height:l.naturalHeight,sizeBytes:r.size}),URL.revokeObjectURL(l.src)},l.onerror=()=>a({width:0,height:0,sizeBytes:r.size}),l.src=URL.createObjectURL(r)})}function Je(r){return new Promise(a=>{const l=document.createElement("video");l.preload="metadata",l.onloadedmetadata=()=>{a({width:l.videoWidth,height:l.videoHeight,duration:Math.round(l.duration),sizeBytes:r.size}),URL.revokeObjectURL(l.src)},l.onerror=()=>a({width:0,height:0,sizeBytes:r.size}),l.src=URL.createObjectURL(r)})}function nt({user:r}){const[a,l]=n.useState("post"),[u,b]=n.useState("select"),[h,L]=n.useState(""),[i,y]=n.useState([]),[c,R]=n.useState(0),[w,P]=n.useState("public"),[he,A]=n.useState("public"),[ue,D]=n.useState(!1),[j,J]=n.useState("normal"),[B,M]=n.useState(!1),[T,v]=n.useState(null),[q,_]=n.useState("idle"),[K,F]=n.useState(null),O=n.useRef(null),U=n.useRef(null),X=n.useRef(null),Y=We(),[Q,Z]=n.useState(!1),V=r.is_creator;n.useEffect(()=>{let t=!0;if(!V){A("public"),P("public");return}return ke(r.telegram_id).then(s=>{if(!t||!s)return;const d=s.default_post_visibility||"public";A(d),P(d)}).catch(()=>{t&&(A("public"),P("public"))}),()=>{t=!1}},[r.telegram_id,V]),n.useEffect(()=>{U.current&&(U.current.style.height="auto",U.current.style.height=U.current.scrollHeight+"px")},[h]),n.useEffect(()=>{if(X.current&&u==="edit"){const t=G.findIndex(d=>d.id===j),s=X.current.children[t];s&&s.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[j,u]);const W=n.useCallback(async t=>{const s=t.target,d=Array.from(s?.files||[]);if(d.length===0)return;s&&(s.value="");const m=(a==="story"?1:5)-i.length;let p=d;if(a==="story"?(y([]),p=d.slice(0,1)):p=d.slice(0,m),!(p.length===0&&a!=="story"))for(const f of p){const x=Ce(f);if(x==="unknown")continue;_("checking"),F(null);const N=URL.createObjectURL(f);let k,I;if(x==="image")k=await He(f);else if(x==="video"){k=await Je(f);const S=await ae(f);S&&(I={file:S,preview:URL.createObjectURL(S)})}const se={file:f,preview:N,type:x,metadata:k,thumbnail:I};try{{const E=x==="video"&&I?I.file:f,C=await Ee(E);if(C?.flagged){_("rejected");let z="This content violates our community guidelines.";C.categories?.sexual_minors?z="This content has been flagged for safety concerns.":C.categories?.sexual?z=C.reasons?.[0]||"Explicit content not allowed.":C.categories?.violence?z="Graphic violence not allowed.":C.reasons?.length>0&&(z=C.reasons[0]),F(z),URL.revokeObjectURL(N);continue}}_("approved"),y(E=>[...E,se])}catch(S){console.error("[CreatePage] Moderation error:",S),_("approved"),y(E=>[...E,se])}}},[i.length,a]);n.useEffect(()=>{const t=O.current;if(!t)return;const s=d=>W(d);return t.addEventListener("change",s),t.addEventListener("input",s),()=>{t.removeEventListener("change",s),t.removeEventListener("input",s)}},[W]);const me=t=>{y(s=>{const d=[...s],o=d.splice(t,1)[0];return o&&(URL.revokeObjectURL(o.preview),o.thumbnail?.preview&&URL.revokeObjectURL(o.thumbnail.preview)),d}),i.length<=1&&(_("idle"),F(null)),c>=i.length-1&&c>0&&R(c-1)},ee=()=>G.find(s=>s.id===j)?.filter||"none",fe=(t,s)=>{Z(!1);const d=50,o=500;(Math.abs(s.offset.x)>d||Math.abs(s.velocity.x)>o)&&(s.offset.x>0||s.velocity.x>o?c>0&&R(c-1):(s.offset.x<0||s.velocity.x<-o)&&c<i.length-1&&R(c+1)),Y.start({x:0,transition:{type:"spring",stiffness:300,damping:30}})},xe=()=>{i.length!==0&&b("edit")},be=()=>b("select"),pe=async()=>{if(!B&&!(a==="post"&&!h.trim()&&i.length===0)&&!(a==="story"&&i.length===0)){M(!0),v({message:"Preparing...",percentage:0});try{if(a==="post"&&h.trim()&&(await ze(h.trim()))?.flagged){alert("Post blocked by moderation."),M(!1),v(null);return}let t=[],s;const d=i.length;for(let o=0;o<i.length;o++){const m=i[o],p=o/d*80;let f=m.file;m.type==="image"&&(v({message:`Compressing ${o+1}/${d}...`,percentage:p+10}),f=await Se(f)),v({message:`Uploading ${o+1}/${d}...`,percentage:p+40});let x;if(a==="story"?x=await Le(f,r.telegram_id):x=await Re(f,r.telegram_id),x.error){alert("Upload failed: "+x.error),M(!1),v(null);return}if(x.url&&t.push(x.url),o===0&&m.type==="video"){let N=m.thumbnail?.file;if(N||(N=await ae(m.file)??void 0),N){const k=await Pe(N,r.telegram_id);!k.error&&k.url&&(s=k.url)}}}if(v({message:"Publishing...",percentage:90}),a==="story"){const o=i[0];if(!await Ge(r.telegram_id,t[0],o.type,s,o.metadata?.duration))throw new Error("Failed to create story")}else{const o=j!=="normal"?JSON.stringify({filter:j}):void 0,m={content:h.trim(),media_url:t[0],media_urls:t.length>0?t:void 0,media_type:i[0]?.type==="other"?"image":i[0]?.type,visibility:V?w:"public",is_nsfw:!1,unlock_price:0,media_width:i[0]?.metadata?.width,media_height:i[0]?.metadata?.height,media_duration:i[0]?.metadata?.duration,media_size_bytes:i[0]?.metadata?.sizeBytes,post_type:"thought",media_filter:o};s&&(m.media_thumbnail_url=s);const p=await Ue(r.telegram_id,m);if(p.error)throw new Error(p.error.message)}v({message:a==="story"?"Story Added!":"Posted!",percentage:100}),setTimeout(()=>{te(),window.history.back()},1e3)}catch(t){console.error("Post error:",t),alert(t.message||"Something went wrong"),M(!1),v(null)}}},te=()=>{L(""),P(he),i.forEach(t=>{URL.revokeObjectURL(t.preview),t.thumbnail?.preview&&URL.revokeObjectURL(t.thumbnail.preview)}),y([]),_("idle"),v(null),J("normal"),b("select")},ge=()=>{te(),window.history.back()},we=i.length>0;return e.jsxs("div",{className:"fixed inset-0 bg-black text-white flex flex-col font-sans z-[50]",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[60%] h-[60%] bg-blue-500/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[60%] h-[60%] bg-purple-500/10 rounded-full blur-[120px]"})]}),e.jsx($,{children:T&&e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center backdrop-blur-xl",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90 drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]",children:[e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"rgba(255,255,255,0.1)",strokeWidth:"6",fill:"none"}),e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"white",strokeWidth:"6",fill:"none",strokeDasharray:251.2,strokeDashoffset:251.2-251.2*T.percentage/100,className:"transition-all duration-300 ease-out",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xl font-bold tracking-tight",children:[Math.round(T.percentage),"%"]})})]}),e.jsx("p",{className:"text-white/70 text-base font-medium tracking-wide",children:T.message})]})}),e.jsx($,{children:K&&e.jsx(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute inset-0 z-[90] flex items-center justify-center px-6 bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#1c1c1e] rounded-3xl p-6 max-w-sm w-full border border-white/10 shadow-2xl",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-red-500/20 flex items-center justify-center mb-4 mx-auto",children:e.jsx(Me,{className:"w-7 h-7 text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-center mb-2",children:"Review Failed"}),e.jsx("p",{className:"text-white/60 text-center text-sm mb-6 leading-relaxed",children:K}),e.jsx("button",{onClick:()=>F(null),className:"w-full py-3.5 bg-white text-black font-semibold rounded-xl active:scale-95 transition-transform",children:"Understood"})]})})}),u==="select"&&e.jsxs(g.div,{className:"flex-1 flex flex-col relative z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-4 pt-[calc(env(safe-area-inset-top)+60px)] z-20",children:[e.jsx("button",{onClick:ge,className:"w-10 h-10 rounded-full bg-black/40 backdrop-blur-md border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(re,{className:"w-5 h-5 text-white"})}),we&&e.jsxs("button",{onClick:xe,className:"px-6 py-2.5 bg-white text-black rounded-full font-semibold text-sm shadow-[0_0_20px_rgba(255,255,255,0.3)] active:scale-95 transition-transform flex items-center gap-2",children:[e.jsx("span",{children:"Next"}),e.jsx(Te,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center px-6 overflow-hidden",children:[e.jsx("input",{ref:O,type:"file",accept:"image/*,video/*",multiple:a==="post",className:"hidden",onChange:W,onClick:t=>{t.target.value=""},disabled:q==="checking"}),i.length===0?e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>O.current?.click(),className:"group relative w-full aspect-[4/5] max-h-[60vh] rounded-[32px] border-2 border-dashed border-white/10 bg-white/5 flex flex-col items-center justify-center overflow-hidden transition-colors hover:border-white/20 hover:bg-white/[0.07]",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(15)].map((t,s)=>e.jsx(g.div,{className:"absolute w-1 h-1 bg-white/40 rounded-full",initial:{opacity:.2,scale:.5},animate:{opacity:[.2,.8,.2],scale:[.5,1,.5]},transition:{duration:2+Math.random()*3,repeat:1/0,delay:Math.random()*2},style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`}},s))}),q==="checking"?e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(ie,{className:"w-12 h-12 text-white/70 animate-spin"}),e.jsx("p",{className:"text-white/50 text-sm font-medium tracking-wide",children:"Processing media..."})]}):e.jsxs("div",{className:"flex flex-col items-center gap-6 relative z-10",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/10 flex items-center justify-center backdrop-blur-sm shadow-inner border border-white/10 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Fe,{className:"w-8 h-8 text-white/80"})}),e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/10 flex items-center justify-center backdrop-blur-sm shadow-inner border border-white/10 group-hover:scale-110 transition-transform duration-300 delay-75",children:e.jsx(le,{className:"w-8 h-8 text-white/80 fill-white/80"})})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-xl font-bold text-white tracking-tight",children:"Select Media"}),e.jsxs("p",{className:"text-white/40 text-sm",children:["Photos or Videos for your ",a==="story"?"Story":"Post"]})]})]})]}):e.jsxs("div",{className:"w-full aspect-[4/5] max-h-[60vh] relative",children:[e.jsx($,{mode:"wait",children:e.jsxs(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"w-full h-full rounded-[32px] overflow-hidden bg-black relative border border-white/10 shadow-2xl",children:[i[c].type==="video"?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:i[c].thumbnail?.preview||i[c].preview,alt:"video thumbnail",className:"w-full h-full object-cover opacity-80"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/30",children:e.jsx(le,{className:"w-8 h-8 text-white ml-1",fill:"currentColor"})})})]}):e.jsx("img",{src:i[c].preview,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),me(c)},className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-black/60 backdrop-blur-md flex items-center justify-center border border-white/10 hover:bg-red-500/80 transition-colors",children:e.jsx(re,{className:"w-4 h-4 text-white"})}),i.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-3 py-1 bg-black/60 backdrop-blur-md rounded-full border border-white/10",children:e.jsxs("span",{className:"text-xs font-medium text-white/90",children:[c+1," / ",i.length]})})]},c)}),i.length>1&&e.jsxs("div",{className:"absolute -bottom-20 left-0 right-0 h-16 flex gap-2 justify-center overflow-x-auto px-4 scrollbar-hide",children:[i.map((t,s)=>e.jsx("button",{onClick:()=>R(s),className:`relative w-12 h-12 rounded-xl overflow-hidden flex-shrink-0 transition-all duration-200 border-2 ${s===c?"border-white scale-110 shadow-lg":"border-transparent opacity-50 grayscale"}`,children:e.jsx("img",{src:t.type==="video"&&t.thumbnail?.preview||t.preview,className:"w-full h-full object-cover",alt:""})},s)),i.length<5&&a==="post"&&e.jsx("button",{onClick:()=>O.current?.click(),className:"w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(_e,{className:"w-5 h-5 text-white/50"})})]})]})]}),e.jsx("div",{className:"pb-[calc(env(safe-area-inset-bottom)+24px)] pt-8 flex-shrink-0",children:e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsx("button",{onClick:()=>{l("post"),y([])},className:`text-sm font-bold tracking-widest transition-all duration-300 ${a==="post"?"text-white scale-110 drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]":"text-white/30 hover:text-white/50"}`,children:"POST"}),e.jsx("div",{className:"w-px h-4 bg-white/10"}),e.jsx("button",{onClick:()=>{l("story"),y([])},className:`text-sm font-bold tracking-widest transition-all duration-300 ${a==="story"?"text-white scale-110 drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]":"text-white/30 hover:text-white/50"}`,children:"STORY"})]})})]}),u==="edit"&&e.jsxs(g.div,{className:"flex-1 flex flex-col h-full relative z-10",initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{type:"spring",damping:25,stiffness:300},children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-4 pt-[calc(env(safe-area-inset-top)+60px)] flex-shrink-0 z-30",children:[e.jsx("button",{onClick:be,className:"w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center hover:bg-white/10 transition-colors border border-white/10",children:e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:pe,disabled:B,className:"px-6 py-2 bg-white text-black rounded-full font-bold text-sm shadow-lg active:scale-95 transition-transform disabled:opacity-50 disabled:scale-100 flex items-center gap-2",children:B?e.jsx(ie,{className:"w-4 h-4 animate-spin"}):a==="story"?"Share Story":"Share Post"})]}),e.jsxs("div",{className:"flex-1 relative flex items-center justify-center p-4 overflow-hidden",children:[e.jsx(g.div,{className:"relative w-full h-full max-h-[55vh] rounded-[24px] overflow-hidden shadow-2xl border border-white/10 bg-[#1c1c1e]",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragStart:()=>Z(!0),onDragEnd:fe,animate:Y,style:{filter:ee(),cursor:Q?"grabbing":"grab"},children:i[c]?.type==="video"?e.jsx("img",{src:i[c].thumbnail?.preview||i[c].preview,className:"w-full h-full object-contain pointer-events-none",alt:""}):e.jsx("img",{src:i[c].preview,className:"w-full h-full object-contain pointer-events-none",alt:""})}),i.length>1&&e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex gap-2 justify-center px-4 z-20",children:i.map((t,s)=>e.jsx("button",{onClick:()=>R(s),className:`w-10 h-10 rounded-lg overflow-hidden border-2 transition-all ${s===c?"border-white scale-110 shadow-lg":"border-white/20 opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:t.type==="video"&&t.thumbnail?.preview||t.preview,className:"w-full h-full object-cover",style:{filter:ee()},alt:""})},s))}),a==="post"&&!Q&&e.jsx("div",{className:"absolute top-20 left-8 right-8 z-20 pointer-events-auto",children:e.jsxs("div",{className:"bg-black/60 backdrop-blur-xl rounded-2xl border border-white/10 p-4 shadow-xl",children:[e.jsx("textarea",{ref:U,value:h,onChange:t=>L(t.target.value.slice(0,2200)),placeholder:"Write a caption...",className:"w-full bg-transparent text-white text-[15px] placeholder-white/40 resize-none focus:outline-none min-h-[40px] max-h-[120px]",rows:1}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/10",children:[e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[w==="public"&&e.jsx(oe,{className:"w-3.5 h-3.5 text-white/60"}),w==="followers"&&e.jsx(ne,{className:"w-3.5 h-3.5 text-white/60"}),w==="subscribers"&&e.jsx(ce,{className:"w-3.5 h-3.5 text-white/60"}),e.jsx("span",{className:"text-xs text-white/80 font-medium capitalize",children:w}),e.jsx(Ve,{className:"w-3 h-3 text-white/40"})]}),e.jsxs("span",{className:"text-[10px] text-white/30",children:[h.length,"/2200"]})]})]})})]}),e.jsx("div",{className:"flex-shrink-0 bg-black/80 backdrop-blur-xl border-t border-white/10 pb-[calc(env(safe-area-inset-bottom)+20px)] z-30",children:e.jsx("div",{className:"flex gap-3 overflow-x-auto px-6 py-6 scrollbar-hide",children:G.map(t=>e.jsxs("button",{onClick:()=>J(t.id),className:"flex flex-col items-center gap-2 flex-shrink-0 group",children:[e.jsx("div",{className:`w-16 h-16 rounded-full overflow-hidden border-2 transition-all ${j===t.id?"border-white scale-110":"border-transparent opacity-60 group-hover:opacity-100"}`,children:e.jsx("img",{src:i[c].preview,className:"w-full h-full object-cover",style:{filter:t.filter},alt:t.name})}),e.jsx("span",{className:`text-[10px] font-medium tracking-wide ${j===t.id?"text-white":"text-white/40"}`,children:t.name})]},t.id))})})]}),e.jsx($,{children:ue&&e.jsxs(e.Fragment,{children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-[60] bg-black/80 backdrop-blur-sm",onClick:()=>D(!1)}),e.jsx(g.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"absolute bottom-0 left-0 right-0 z-[61] bg-[#1c1c1e] rounded-t-[32px] overflow-hidden border-t border-white/10",children:e.jsxs("div",{className:"p-4 pb-[calc(env(safe-area-inset-bottom)+20px)]",children:[e.jsx("div",{className:"w-12 h-1 bg-white/10 rounded-full mx-auto mb-6"}),e.jsx("h3",{className:"text-lg font-bold text-white text-center mb-6",children:"Who can see this post?"}),e.jsx("div",{className:"space-y-2",children:[{value:"public",label:"Everyone",icon:oe,sub:"Visible to everyone"},{value:"followers",label:"Followers Only",icon:ne,sub:"Only your followers"},{value:"subscribers",label:"Subscribers Only",icon:ce,sub:"Exclusive for subscribers"}].filter(t=>!(t.value==="subscribers"&&!V)).map(t=>e.jsxs("button",{onClick:()=>{P(t.value),D(!1)},className:`w-full flex items-center gap-4 p-4 rounded-2xl transition-all ${w===t.value?"bg-white text-black":"bg-white/5 text-white hover:bg-white/10"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${w===t.value?"bg-black/10":"bg-white/10"}`,children:e.jsx(t.icon,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-[15px]",children:t.label}),e.jsx("p",{className:`text-[13px] ${w===t.value?"text-black/60":"text-white/40"}`,children:t.sub})]}),w===t.value&&e.jsx(Ie,{className:"w-5 h-5"})]},t.value))})]})})]})})]})}export{nt as default};
