const o="https://eigfbxjheuwxmtdfnvqc.supabase.co/functions/v1/ai-guardrail",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpZ2ZieGpoZXV3eG10ZGZudnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0NDQ4NjEsImV4cCI6MjA4MDAyMDg2MX0.ilFCYkPxz8qJ3Yaw9Lt14JvdFlUsENKLYWXLYrHO8vA";async function n(e){const t=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(e)});if(!t.ok){const r=await t.text();throw console.error("[Guardrail] Error:",t.status,r),new Error(r)}return t.json()}async function c(e){try{return(await n({type:"text",content:e}))?.result||null}catch{return null}}async function s(e){return new Promise((t,r)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=r,a.readAsDataURL(e)})}async function i(e){const r=await(await fetch(e)).blob();return s(r)}async function u(e){try{let t;return e instanceof File||e instanceof Blob?t=await s(e):e.startsWith("blob:")?t=await i(e):t=e,(await n({type:"image",imageUrl:t}))?.result||null}catch(t){return console.error("[moderateImage] Error:",t),null}}async function d(e,t){try{console.log("[Translate] Requesting translation to",t,":",e.slice(0,50));const r=await n({type:"translate",content:e,targetLanguage:t});if(console.log("[Translate] API response:",JSON.stringify(r)),r?.translated)return console.log("[Translate] Success:",r.translated.slice(0,50)),r.translated;throw console.warn("[Translate] No translation in response:",r),new Error("Translation service returned empty result")}catch(r){throw console.error("[Translate] Error:",r),r}}export{c as a,u as m,d as t};
