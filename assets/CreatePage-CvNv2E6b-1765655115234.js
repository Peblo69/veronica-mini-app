import{z as Me,B as pe,C as _e,D as Ee,c as K,r as l,E as Pe,F as ze,G as he,j as e,A as q,m as U,H as Fe,I as Te,J as $e,K as Oe}from"./index-DdyL7W5o-1765655115234.js";import{m as Ie,a as Ae}from"./moderation-Cyx-wVK9-1765655115234.js";import{T as Ve,S as De}from"./triangle-alert-DWUL6oBz-1765655115234.js";import{L as D}from"./loader-circle-B63P42hp-1765655115234.js";import{I as Be}from"./image-BgWFMHAC-1765655115234.js";import{P as re}from"./play-DSDV-b09-1765655115234.js";import{X as We}from"./x-D5nI68-V-1765655115234.js";import{C as He}from"./camera-Drtki7Ah-1765655115234.js";import{C as me}from"./chevron-down-DFPCZ7gR-1765655115234.js";import{C as Ge}from"./chevron-left-FcW8VWLy-1765655115234.js";import{G as ue}from"./globe-DU7VzRgH-1765655115234.js";import{U as xe}from"./users-BBVKkLXz-1765655115234.js";import{S as fe}from"./star-Dx083iUw-1765655115234.js";import{C as qe}from"./check-4eXoXkuY-1765655115234.js";function Je(i){i.values.forEach(n=>n.stop())}function le(i,n){[...n].reverse().forEach(b=>{const v=i.getVariant(b);v&&pe(i,v),i.variantChildren&&i.variantChildren.forEach(f=>{le(f,n)})})}function Ke(i,n){if(Array.isArray(n))return le(i,n);if(typeof n=="string")return le(i,[n]);pe(i,n)}function Xe(){const i=new Set,n={subscribe(r){return i.add(r),()=>void i.delete(r)},start(r,b){const v=[];return i.forEach(f=>{v.push(Me(f,r,{transitionOverride:b}))}),Promise.all(v)},set(r){return i.forEach(b=>{Ke(b,r)})},stop(){i.forEach(r=>{Je(r)})},mount(){return()=>{n.stop()}}};return n}function Ze(){const i=_e(Xe);return Ee(i.mount,[]),i}const Qe=Ze;const Ye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]],et=K("contrast",Ye);const tt=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],st=K("droplets",tt);const it=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],at=K("sliders-horizontal",it);const rt=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],lt=K("thermometer",rt),R=[{id:"normal",name:"Normal",filter:"none"},{id:"vivid",name:"Vivid",filter:"saturate(1.3) contrast(1.1)"},{id:"warm",name:"Warm",filter:"sepia(0.2) saturate(1.1) brightness(1.05)"},{id:"cool",name:"Cool",filter:"saturate(0.9) hue-rotate(10deg) brightness(1.05)"},{id:"bw",name:"B&W",filter:"grayscale(1) contrast(1.1)"},{id:"vintage",name:"Vintage",filter:"sepia(0.4) contrast(0.9) brightness(0.95)"},{id:"fade",name:"Fade",filter:"contrast(0.85) brightness(1.1) saturate(0.8)"},{id:"dramatic",name:"Dramatic",filter:"contrast(1.3) saturate(1.2) brightness(0.95)"},{id:"noir",name:"Noir",filter:"grayscale(1) contrast(1.4) brightness(0.9)"}],J={brightness:100,contrast:100,saturation:100,warmth:0};function nt(i){return new Promise(n=>{const r=document.createElement("img");r.onload=()=>{n({width:r.naturalWidth,height:r.naturalHeight,sizeBytes:i.size}),URL.revokeObjectURL(r.src)},r.onerror=()=>n({width:0,height:0,sizeBytes:i.size}),r.src=URL.createObjectURL(i)})}function ct(i){return new Promise(n=>{const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>{n({width:r.videoWidth,height:r.videoHeight,duration:Math.round(r.duration),sizeBytes:i.size}),URL.revokeObjectURL(r.src)},r.onerror=()=>n({width:0,height:0,sizeBytes:i.size}),r.src=URL.createObjectURL(i)})}function Nt({user:i,mode:n="media"}){const r=n==="text",[b,v]=l.useState("select"),[f,X]=l.useState(""),[a,P]=l.useState([]),[o,ne]=l.useState(0),[j,z]=l.useState("public"),[be,Z]=l.useState("public"),[ge,Q]=l.useState(!1),[y,F]=l.useState("normal"),[d,S]=l.useState(J),[Y,we]=l.useState(!1),[ee,B]=l.useState(!1),[W,N]=l.useState(null),[g,L]=l.useState("idle"),[ve,T]=l.useState(null),M=l.useRef(null),$=l.useRef(null),te=l.useRef(null),_=Qe(),[je,ce]=l.useState(!1),H=i.is_creator;l.useEffect(()=>{let t=!0;if(!H){Z("public"),z("public");return}return Pe(i.telegram_id).then(s=>{if(!t||!s)return;const c=s.default_post_visibility||"public";Z(c),z(c)}).catch(()=>{t&&(Z("public"),z("public"))}),()=>{t=!1}},[i.telegram_id,H]),l.useEffect(()=>{$.current&&($.current.style.height="auto",$.current.style.height=$.current.scrollHeight+"px")},[f]),l.useEffect(()=>{if(te.current&&b==="edit"){const t=R.findIndex(c=>c.id===y),s=te.current.children[t];s&&s.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[y,b]);const se=l.useCallback(async t=>{const s=t.target,c=Array.from(s?.files||[]);if(c.length===0)return;s&&(s.value="");const m=5-a.length,O=c.slice(0,m);for(const u of O){const w=ze(u);if(w==="unknown")continue;L("checking"),T(null);const I=URL.createObjectURL(u);let A,k;if(w==="image")A=await nt(u);else if(w==="video"){A=await ct(u);const x=await he(u);x&&(k={file:x,preview:URL.createObjectURL(x)})}const E={file:u,preview:I,type:w,metadata:A,thumbnail:k};try{{const p=w==="video"&&k?k.file:u,h=await Ie(p);if(h?.flagged){L("rejected");let C="This content violates our community guidelines.";h.categories?.sexual_minors?C="This content has been flagged for safety concerns.":h.categories?.sexual?C=h.reasons?.[0]||"Explicit content not allowed.":h.categories?.violence?C="Graphic violence not allowed.":h.reasons?.length>0&&(C=h.reasons[0]),T(C),URL.revokeObjectURL(I);continue}}L("approved"),P(p=>[...p,E])}catch(x){console.error("[CreatePage] Moderation error:",x),L("approved"),P(p=>[...p,E])}}M.current&&(M.current.value="")},[a.length]);l.useEffect(()=>{const t=M.current;if(!t)return;const s=c=>se(c);return t.addEventListener("change",s),t.addEventListener("input",s),()=>{t.removeEventListener("change",s),t.removeEventListener("input",s)}},[se]);const ye=t=>{P(s=>{const c=[...s],m=c.splice(t,1)[0];return m&&(URL.revokeObjectURL(m.preview),m.thumbnail?.preview&&URL.revokeObjectURL(m.thumbnail.preview)),c}),a.length===1&&(L("idle"),T(null)),o>=a.length-1&&o>0&&ne(o-1)},oe=()=>{const s=R.find(m=>m.id===y)?.filter||"none",c=[`brightness(${d.brightness/100})`,`contrast(${d.contrast/100})`,`saturate(${d.saturation/100})`,d.warmth!==0?`sepia(${Math.abs(d.warmth)/200})`:""].filter(Boolean).join(" ");return s==="none"?c||"none":`${s} ${c}`.trim()},Ne=(t,s)=>{ce(!1);const c=50,m=500;if(Math.abs(s.offset.x)>c||Math.abs(s.velocity.x)>m){const u=R.findIndex(w=>w.id===y);s.offset.x>0||s.velocity.x>m?u>0?(F(R[u-1].id),_.start({x:0,transition:{type:"spring",stiffness:300,damping:30}})):_.start({x:0,transition:{type:"spring",stiffness:500,damping:30}}):(s.offset.x<0||s.velocity.x<-m)&&(u<R.length-1?(F(R[u+1].id),_.start({x:0,transition:{type:"spring",stiffness:300,damping:30}})):_.start({x:0,transition:{type:"spring",stiffness:500,damping:30}}))}else _.start({x:0,transition:{type:"spring",stiffness:500,damping:30}})},ke=()=>{a.length===0&&!r||v("edit")},Ce=()=>v("select"),Se=async()=>{if(!ee&&!(!f.trim()&&a.length===0)){B(!0),N({message:"Preparing...",percentage:0});try{if(f.trim()&&(await Ae(f.trim()))?.flagged){alert("Post blocked by moderation."),B(!1),N(null);return}let t,s=[],c,m,O,u,w,I;if(a.length>0){const x=a.length;for(let p=0;p<a.length;p++){const h=a[p],C=p/x*80;let ie=h.file;h.type==="image"&&(N({message:`Compressing ${p+1}/${x}...`,percentage:C+10}),ie=await Fe(ie)),N({message:`Uploading ${p+1}/${x}...`,percentage:C+40});const V=await Te(ie,i.telegram_id);if(V.error){alert("Upload failed: "+V.error),B(!1),N(null);return}if(V.url&&(s.push(V.url),p===0&&(t=V.url,c=h.type==="other"?"image":h.type,O=h.metadata?.width,u=h.metadata?.height,w=h.metadata?.duration,I=h.metadata?.sizeBytes)),p===0&&h.type==="video"){let G=h.thumbnail?.file;if(G||(G=await he(h.file)??void 0),G){const ae=await $e(G,i.telegram_id);!ae.error&&ae.url&&(m=ae.url)}}}}N({message:"Publishing...",percentage:90});const A=y!=="normal"||d.brightness!==100||d.contrast!==100||d.saturation!==100||d.warmth!==0?JSON.stringify({filter:y,adjustments:d}):void 0,k={content:f.trim(),media_url:t,media_urls:s.length>0?s:void 0,media_type:c,visibility:H?j:"public",is_nsfw:!1,unlock_price:0,media_width:O,media_height:u,media_duration:w,media_size_bytes:I,post_type:"thought",media_filter:A};m&&(k.media_thumbnail_url=m),console.log("[CreatePage] Creating post with payload:",JSON.stringify(k,null,2));const E=await Oe(i.telegram_id,k);console.log("[CreatePage] Post result:",JSON.stringify(E,null,2)),E.error?alert(`Failed to create post: ${E.error||"Please try again."}`):(N({message:"Posted!",percentage:100}),setTimeout(()=>{X(""),z(be),a.forEach(x=>{URL.revokeObjectURL(x.preview),x.thumbnail?.preview&&URL.revokeObjectURL(x.thumbnail.preview)}),P([]),L("idle"),N(null),F("normal"),S(J),v("select"),window.history.back()},1e3))}catch(t){console.error("Post error:",t),alert("Something went wrong")}finally{B(!1)}}},Le=()=>j==="public"?e.jsx(ue,{className:"w-3.5 h-3.5"}):j==="followers"?e.jsx(xe,{className:"w-3.5 h-3.5"}):e.jsx(fe,{className:"w-3.5 h-3.5"}),Ue=()=>j==="public"?"Everyone":j==="followers"?"My Friends":"Subscribers",de=a.length>0||r&&f.trim().length>0,Re=()=>{X(""),a.forEach(t=>{URL.revokeObjectURL(t.preview),t.thumbnail?.preview&&URL.revokeObjectURL(t.thumbnail.preview)}),P([]),L("idle"),F("normal"),S(J),window.history.back()};return e.jsxs("div",{className:"h-full bg-black text-white flex flex-col overflow-hidden",children:[e.jsx(q,{children:W&&e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto mb-4 relative",children:[e.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",children:[e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4",fill:"none"}),e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"white",strokeWidth:"4",fill:"none",strokeDasharray:175.9,strokeDashoffset:175.9-175.9*W.percentage/100,className:"transition-all duration-300"})]}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold",children:[Math.round(W.percentage),"%"]})]}),e.jsx("p",{className:"text-white/60 text-sm",children:W.message})]})})}),e.jsx(q,{children:ve&&e.jsxs(e.Fragment,{children:[e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>T(null)}),e.jsxs(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-[280px] rounded-2xl overflow-hidden",style:{background:"rgba(40, 40, 40, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[e.jsxs("div",{className:"flex flex-col items-center py-6 px-5",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center mb-4",children:e.jsx(Ve,{className:"w-6 h-6 text-red-400"})}),e.jsx("h3",{className:"text-white text-[17px] font-semibold mb-2",children:"Content Not Allowed"}),e.jsx("p",{className:"text-white/60 text-[14px] text-center",children:"Explicit content detected. Please choose a different image."})]}),e.jsx("button",{onClick:()=>T(null),className:"w-full py-3.5 border-t border-white/10 text-[16px] font-medium text-blue-400 active:bg-white/5",children:"OK"})]})]})}),b==="select"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center",style:{height:"44px",marginTop:"calc(env(safe-area-inset-top, 0px) + 6px)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Re,className:"px-3 py-1.5 rounded-full bg-black/40 backdrop-blur-sm active:bg-white/20 text-white text-[13px] font-medium",children:"Cancel"}),e.jsx("button",{onClick:ke,disabled:!de||g==="checking",className:`px-4 py-1.5 rounded-full text-[13px] font-semibold transition-all ${de&&g!=="checking"?"bg-white text-black":"bg-black/40 backdrop-blur-sm text-white/50"}`,children:g==="checking"?e.jsx(D,{className:"w-4 h-4 animate-spin"}):"Next"})]})}),e.jsx("div",{style:{height:"calc(56px + env(safe-area-inset-top, 0px))"}}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-none",children:e.jsxs("div",{className:"px-4 py-4",children:[a.length===0?e.jsxs("div",{className:"w-full aspect-[4/3] rounded-2xl border-2 border-dashed border-white/20 flex flex-col items-center justify-center gap-3 hover:border-white/30 transition-colors active:scale-[0.98] relative",children:[e.jsx("input",{ref:M,type:"file",accept:"image/*,video/*",multiple:!0,capture:!1,className:"sr-only",onChange:t=>se(t),onClick:t=>{t.target.value=""},disabled:g==="checking"}),e.jsx("button",{type:"button",onClick:()=>M.current?.click(),disabled:g==="checking",className:"absolute inset-0 w-full h-full"}),g==="checking"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center pointer-events-none",children:e.jsx(D,{className:"w-8 h-8 text-white/60 animate-spin"})}),e.jsxs("div",{className:"text-center pointer-events-none",children:[e.jsx("p",{className:"text-white text-[15px] font-medium",children:"Checking content..."}),e.jsx("p",{className:"text-white/40 text-[13px] mt-1",children:"Please wait"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center pointer-events-none",children:e.jsx(Be,{className:"w-8 h-8 text-white/40"})}),e.jsxs("div",{className:"text-center pointer-events-none",children:[e.jsx("p",{className:"text-white text-[15px] font-medium",children:"Add photos or videos"}),e.jsx("p",{className:"text-white/40 text-[13px] mt-1",children:"Tap to select"})]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden bg-white/5",children:[a[o]?.type==="image"?e.jsx("img",{src:a[o].preview,alt:"preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:a[o]?.thumbnail?.preview||a[o]?.preview,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-14 h-14 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center border-2 border-white/20",children:e.jsx(re,{className:"w-6 h-6 text-white ml-0.5",fill:"white"})})})]}),g==="checking"&&e.jsxs("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm flex flex-col items-center justify-center gap-3 z-10",children:[e.jsx(D,{className:"w-10 h-10 text-white animate-spin"}),e.jsx("p",{className:"text-white text-[14px] font-medium",children:"Checking content..."})]}),e.jsx("button",{onClick:()=>ye(o),className:"absolute top-2 right-2 w-7 h-7 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center border border-white/15",children:e.jsx(We,{className:"w-3.5 h-3.5 text-white"})}),a.length>1&&e.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 rounded-full bg-black/60 backdrop-blur-sm text-[11px] font-medium text-white",children:[o+1,"/",a.length]})]}),a.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[a.map((t,s)=>e.jsxs("button",{onClick:()=>ne(s),className:`relative w-14 h-14 rounded-lg overflow-hidden flex-shrink-0 transition-all ${s===o?"ring-2 ring-white":"opacity-60"}`,children:[e.jsx("img",{src:t.type==="video"&&t.thumbnail?.preview||t.preview,alt:"",className:"w-full h-full object-cover"}),t.type==="video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(re,{className:"w-3 h-3 text-white",fill:"white"})})]},s)),a.length<5&&e.jsx("button",{onClick:()=>M.current?.click(),disabled:g==="checking",className:`w-14 h-14 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center flex-shrink-0 transition-colors ${g==="checking"?"opacity-50":"hover:border-white/30"}`,children:g==="checking"?e.jsx(D,{className:"w-5 h-5 text-white/40 animate-spin"}):e.jsx(He,{className:"w-5 h-5 text-white/40"})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("textarea",{ref:$,value:f,onChange:t=>X(t.target.value.slice(0,2200)),placeholder:"Write a caption...",className:"w-full bg-transparent text-white text-[15px] placeholder-white/40 resize-none focus:outline-none min-h-[80px] leading-relaxed",rows:3}),f.length>2e3&&e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`text-[11px] ${f.length>2100?"text-orange-400":"text-white/30"}`,children:[f.length,"/2200"]})})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/[0.06]",children:e.jsxs("button",{onClick:()=>Q(!0),className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-full bg-white/[0.06] hover:bg-white/[0.1] transition-colors",children:[Le(),e.jsx("span",{className:"text-white/80 text-[12px] font-medium",children:Ue()}),e.jsx(me,{className:"w-3 h-3 text-white/40"})]})})]})})]}),b==="edit"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center",style:{height:"44px",marginTop:"calc(env(safe-area-inset-top, 0px) + 6px)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:Ce,className:"flex items-center gap-0.5 px-3 py-1.5 rounded-full bg-black/40 backdrop-blur-sm active:bg-white/20 text-white",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[13px] font-medium",children:"Back"})]}),e.jsx("button",{onClick:Se,disabled:ee,className:"px-4 py-1.5 rounded-full text-[13px] font-semibold bg-white text-black transition-all",children:ee?e.jsx(D,{className:"w-4 h-4 animate-spin"}):"Post"})]})}),e.jsx("div",{style:{height:"calc(56px + env(safe-area-inset-top, 0px))"}}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"border-b border-white/10 flex-shrink-0",children:e.jsx("div",{ref:te,className:"flex gap-2 px-3 py-3 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:R.map(t=>e.jsxs("button",{onClick:()=>F(t.id),className:`flex flex-col items-center gap-1.5 flex-shrink-0 transition-all ${y===t.id?"opacity-100":"opacity-50"}`,children:[e.jsx("div",{className:`w-14 h-14 rounded-lg overflow-hidden border-2 transition-colors ${y===t.id?"border-white":"border-transparent"}`,children:a[o]&&e.jsx("img",{src:a[o].type==="video"&&a[o].thumbnail?.preview||a[o].preview,alt:"",className:"w-full h-full object-cover",style:{filter:t.filter}})}),e.jsx("span",{className:`text-[10px] font-medium ${y===t.id?"text-white":"text-white/60"}`,children:t.name})]},t.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-none",children:e.jsxs(U.div,{className:"p-4",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragStart:()=>ce(!0),onDragEnd:Ne,animate:_,style:{cursor:je?"grabbing":"grab"},children:[e.jsx("div",{className:"relative rounded-2xl overflow-hidden bg-white/5",children:a[o]?.type==="image"?e.jsx("img",{src:a[o].preview,alt:"preview",className:"w-full h-auto object-contain rounded-2xl pointer-events-none",style:{filter:oe()},draggable:!1}):e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a[o]?.thumbnail?.preview||a[o]?.preview,alt:"preview",className:"w-full h-auto rounded-2xl pointer-events-none",style:{filter:oe()},draggable:!1}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center border-2 border-white/20",children:e.jsx(re,{className:"w-7 h-7 text-white ml-1",fill:"white"})})})]})}),e.jsx("p",{className:"text-center text-white/30 text-[11px] mt-3",children:"Swipe left or right to change filter"})]})}),e.jsxs("div",{className:"border-t border-white/10 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>we(!Y),className:"w-full flex items-center justify-center gap-2 py-2.5 text-white/60 hover:text-white transition-colors",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[13px] font-medium",children:"Manual Adjustments"}),e.jsx(me,{className:`w-4 h-4 transition-transform duration-200 ${Y?"rotate-180":""}`})]}),e.jsx(q,{children:Y&&e.jsx(U.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden px-4 pb-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Brightness"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[d.brightness,"%"]})]}),e.jsx("input",{type:"range",min:"50",max:"150",value:d.brightness,onChange:t=>S(s=>({...s,brightness:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(et,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Contrast"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[d.contrast,"%"]})]}),e.jsx("input",{type:"range",min:"50",max:"150",value:d.contrast,onChange:t=>S(s=>({...s,contrast:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Saturation"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[d.saturation,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"200",value:d.saturation,onChange:t=>S(s=>({...s,saturation:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lt,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Warmth"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[d.warmth>0?"+":"",d.warmth]})]}),e.jsx("input",{type:"range",min:"-50",max:"50",value:d.warmth,onChange:t=>S(s=>({...s,warmth:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsx("button",{onClick:()=>S(J),className:"w-full py-1.5 text-[12px] text-white/30 hover:text-white/50 transition-colors",children:"Reset all"})]})})})]})]})]}),e.jsx("div",{className:"h-4 flex-shrink-0"}),e.jsx(q,{children:ge&&e.jsxs(e.Fragment,{children:[e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-md z-40",onClick:()=>Q(!1)}),e.jsx(U.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:400},className:"fixed bottom-0 left-0 right-0 z-50",children:e.jsxs("div",{className:"bg-black rounded-t-2xl border-t border-white/[0.08] overflow-hidden",children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-9 h-1 bg-white/20 rounded-full"})}),e.jsxs("div",{className:"px-4 pb-6",children:[e.jsx("p",{className:"text-white text-[13px] font-medium text-center mb-3 text-white/50",children:"Who can see this?"}),e.jsx("div",{className:"space-y-1",children:[{value:"public",icon:ue,label:"Everyone",creatorOnly:!1},{value:"followers",icon:xe,label:"Friends",creatorOnly:!1},{value:"subscribers",icon:fe,label:"Subscribers",creatorOnly:!0}].filter(t=>!t.creatorOnly||H).map(t=>e.jsxs("button",{onClick:()=>{z(t.value),Q(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all ${j===t.value?"bg-white/[0.08]":"active:bg-white/[0.04]"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${j===t.value?"bg-white text-black":"bg-white/[0.08] text-white/60"}`,children:e.jsx(t.icon,{className:"w-4 h-4"})}),e.jsx("span",{className:`flex-1 text-left text-[14px] font-medium ${j===t.value?"text-white":"text-white/70"}`,children:t.label}),j===t.value&&e.jsx(qe,{className:"w-4 h-4 text-white"})]},t.value))})]}),e.jsx("div",{className:"h-6"})]})})]})})]})}export{Nt as default};
