import{c as g,r as w,a9 as N,aa as k,ab as _,j as a,A as u,m as r,X as F,C as M,a5 as B,a7 as L}from"./index-g4VRfwmb-1765324318710.js";const C=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],S=g("bookmark",C);const z=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],$=g("grid-3x3",z);function E({isOpen:c,onClose:n,userId:h,currentUserId:t,type:d,onUserClick:x}){const[f,s]=w.useState([]),[b,p]=w.useState(!0);w.useEffect(()=>{c&&j()},[c,h,d]);const j=async()=>{p(!0);const e=d==="followers"?await N(h,200):await k(h,200),o=await Promise.all(e.map(async l=>{if(l.telegram_id===t)return{...l,isFollowedByMe:!1};const i=await _(t,l.telegram_id);return{...l,isFollowedByMe:i}}));s(o),p(!1)},v=async(e,o)=>{o.stopPropagation(),s(l=>l.map(i=>i.telegram_id===e.telegram_id?{...i,followLoading:!0}:i));try{e.isFollowedByMe?(await B(t,e.telegram_id),s(l=>l.map(i=>i.telegram_id===e.telegram_id?{...i,isFollowedByMe:!1,followLoading:!1}:i))):(await L(t,e.telegram_id),s(l=>l.map(i=>i.telegram_id===e.telegram_id?{...i,isFollowedByMe:!0,followLoading:!1}:i)))}catch(l){console.error("Follow/unfollow error:",l),s(i=>i.map(m=>m.telegram_id===e.telegram_id?{...m,followLoading:!1}:m))}},y=e=>{x&&(x(e),n())};return a.jsx(u,{children:c&&a.jsxs(a.Fragment,{children:[a.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[100]",onClick:n}),a.jsx(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25,stiffness:350},className:"fixed inset-0 z-[101] flex items-center justify-center p-4",onClick:n,children:a.jsxs("div",{className:"bg-[#1a1a1f] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-white/10",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[a.jsx("span",{className:"text-lg font-semibold text-white capitalize",children:d}),a.jsx(r.button,{whileTap:{scale:.9},onClick:n,className:"w-9 h-9 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/15 transition-colors",children:a.jsx(F,{className:"w-5 h-5 text-white"})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[70vh] min-h-[200px]",children:b?a.jsx("div",{className:"p-4 space-y-3",children:[1,2,3,4,5].map(e=>a.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-white/10 rounded w-28 mb-1.5"}),a.jsx("div",{className:"h-3 bg-white/10 rounded w-20"})]}),a.jsx("div",{className:"w-20 h-8 bg-white/10 rounded-lg"})]},e))}):f.length===0?a.jsx("div",{className:"py-20 text-center",children:a.jsx("p",{className:"text-white/40 text-sm",children:d==="followers"?"No followers yet":"Not following anyone"})}):a.jsx("div",{className:"p-3 space-y-1",children:f.map(e=>a.jsxs("div",{className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-white/5 active:bg-white/10 transition-colors cursor-pointer",onClick:()=>y(e),children:[a.jsx("img",{src:e.avatar_url||`https://i.pravatar.cc/150?u=${e.telegram_id}`,alt:e.first_name||"User",className:"w-12 h-12 rounded-full object-cover border border-white/10 shrink-0"}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsxs("span",{className:"font-semibold text-white text-[15px] truncate",children:[e.first_name," ",e.last_name]}),e.is_verified&&a.jsx(M,{className:"w-4 h-4 text-blue-400 fill-blue-400 shrink-0"})]}),a.jsx("div",{className:"text-sm text-white/50 truncate",children:e.username?`@${e.username}`:e.is_creator?"Creator":"User"})]}),e.telegram_id!==t&&a.jsx(r.button,{whileTap:{scale:.95},onClick:o=>v(e,o),disabled:e.followLoading,className:`px-4 py-1.5 rounded-lg text-sm font-semibold transition-colors shrink-0 min-w-[90px] ${e.followLoading?"bg-white/10 text-white/50":e.isFollowedByMe?"bg-white/10 text-white hover:bg-white/15":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e.followLoading?a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white/30 border-t-white/70 rounded-full animate-spin"}):e.isFollowedByMe?"Following":"Follow"})]},e.telegram_id))})})]})})]})})}export{S as B,E as F,$ as G};
