import{c as $e,d as Rs,aj as Ts,r as l,j as e,M as oe,S as Ae,X as I,P as ke,A as W,m as Se}from"./index-CEvvJH53-1765560150282.js";import{S as J}from"./shield-CCfgybUy-1765560150282.js";import{C as $s}from"./chart-column-BTI5vUBi-1765560150282.js";import{U as me}from"./users-Cek9m_D--1765560150282.js";import{F as xe}from"./file-text-B4L5wcXW-1765560150282.js";import{F as ge}from"./flag-BICnFEAZ-1765560150282.js";import{M as Fs}from"./megaphone-CpyCjE2w-1765560150282.js";import{S as Ds,R as Ms,A as ue,T as Is}from"./trending-up-C7CKVIRR-1765560150282.js";import{A as Ue}from"./arrow-left-9ILZyhad-1765560150282.js";import{E as ie,C as Fe}from"./eye-CoT1dWLx-1765560150282.js";import{T as le}from"./trash-2-T06c_Kv6-1765560150282.js";import{L as Pe}from"./lock-8ajNZyl3-1765560150282.js";import{C as Y}from"./check-CnY7LQ62-1765560150282.js";import{U as Ls}from"./user-x-ClBpLMEN-1765560150282.js";import{B as Es}from"./ban-DmzS4IsP-1765560150282.js";const Bs=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Re=$e("lock-open",Bs);const Vs=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],L=$e("user-check",Vs),zs="https://eigfbxjheuwxmtdfnvqc.supabase.co/functions/v1/admin-api";async function c(a){const r=Ts();if(!r?.accessToken)throw new Error("Not authenticated - please log in again");const t=await fetch(zs,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.accessToken}`},body:JSON.stringify(a)});if(t.status===204)return null;if(!t.ok){const d=await t.text();throw new Error(`Admin API (${t.status}): ${d||"Unknown error"}`)}return await t.json()}async function Os(a){return c({action:"check_admin",data:{telegramId:a}})}async function Hs(a=1,r=20,t,d){return c({action:"list_users",data:{page:a,limit:r,search:t,filter:d}})}async function Ws(a){return c({action:"user_details",data:{telegramId:a}})}async function Ys(a,r,t){return await c({action:"update_user",data:{telegramId:a,updates:r,adminId:t}}),!0}async function qs(a,r,t,d=!1,u){return await c({action:"ban_user",data:{telegramId:a,reason:r,adminId:t,isPermanent:d,duration:u}}),!0}async function Js(a,r){return await c({action:"unban_user",data:{telegramId:a,adminId:r}}),!0}async function Gs(a=1,r=50,t){return c({action:"list_conversations",data:{page:a,limit:r,search:t}})}async function Xs(a,r=1,t=100){return c({action:"conversation_messages",data:{conversationId:a,page:r,limit:t}})}async function Ks(a,r,t){return await c({action:"delete_message",data:{messageId:a,adminId:r,reason:t}}),!0}async function Qs(a=1,r=20,t){return c({action:"list_posts",data:{page:a,limit:r,filters:t}})}async function Zs(a,r,t){return await c({action:"hide_post",data:{postId:a,reason:r,adminId:t}}),!0}async function et(a,r){return await c({action:"unhide_post",data:{postId:a,adminId:r}}),!0}async function st(a,r,t){return await c({action:"delete_post",data:{postId:a,adminId:r,reason:t}}),!0}async function tt(a,r=1,t=50){return c({action:"list_applications",data:{status:a,page:r,limit:t}})}async function at(a,r,t){return await c({action:"approve_application",data:{applicationId:a,userId:r,adminId:t}}),!0}async function nt(a,r,t,d){return await c({action:"reject_application",data:{applicationId:a,userId:r,reason:t,adminId:d}}),!0}async function rt(a,r,t=1,d=50){return c({action:"list_reports",data:{status:a,priority:r,page:t,limit:d}})}async function it(a,r,t){return await c({action:"update_report",data:{reportId:a,updates:r,adminId:t}}),!0}async function lt(a,r){return c({action:"get_reported_content",data:{reportedType:a,reportedId:r}})}async function ct(a="pending",r=1,t=50){return c({action:"list_flagged_content",data:{status:a,page:r,limit:t}})}async function dt(a,r,t,d){return await c({action:"review_flagged_content",data:{flaggedId:a,decision:r,adminId:t,notes:d}}),!0}async function ot(a=!1){return c({action:"list_announcements",data:{includeInactive:a}})}async function mt(a,r,t,d){return c({action:"create_announcement",data:{title:a,content:r,adminId:t,...d}})}async function xt(a,r,t){return await c({action:"update_announcement",data:{announcementId:a,updates:r,adminId:t}}),!0}async function gt(a,r){return await c({action:"delete_announcement",data:{announcementId:a,adminId:r}}),!0}async function ut(){return c({action:"platform_stats"})}async function pt(a=1,r=50,t){return c({action:"activity_log",data:{page:a,limit:r,adminId:t}})}async function ht(a=20){return c({action:"recent_activity",data:{limit:a}})}async function jt(){return c({action:"list_admins"})}async function yt(a,r,t,d,u){return c({action:"create_admin",data:{telegramId:a,username:r,role:t,permissions:d,createdBy:u}})}async function bt(a,r){return await c({action:"delete_admin",data:{adminTargetId:a,adminId:r}}),!0}function ft(a){const r=Rs.channel("admin-all-activity");return a.onNewUser&&r.on("postgres_changes",{event:"INSERT",schema:"public",table:"users"},t=>{a.onNewUser(t.new)}),a.onNewPost&&r.on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},t=>{a.onNewPost(t.new)}),a.onNewMessage&&r.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},t=>{a.onNewMessage(t.new)}),a.onNewReport&&r.on("postgres_changes",{event:"INSERT",schema:"public",table:"reports"},t=>{a.onNewReport(t.new)}),a.onNewFlagged&&r.on("postgres_changes",{event:"INSERT",schema:"public",table:"flagged_content"},t=>{a.onNewFlagged(t.new)}),a.onNewApplication&&r.on("postgres_changes",{event:"*",schema:"public",table:"creator_applications"},t=>{a.onNewApplication(t.new)}),r.subscribe()}function Mt({telegramId:a,onExit:r}){const[t,d]=l.useState(null),[u,R]=l.useState(!0),[x,A]=l.useState("dashboard"),[o,j]=l.useState(null),[k,T]=l.useState(null),[G,S]=l.useState([]),[De,Me]=l.useState([]),[pe,Ie]=l.useState(0),[E,Le]=l.useState(1),[f,Ee]=l.useState(""),[N,Be]=l.useState(""),[m,$]=l.useState(null),[Ve,ze]=l.useState([]),[,Oe]=l.useState(0),[F,he]=l.useState(null),[He,je]=l.useState([]),[We,Ye]=l.useState([]),[ye,qe]=l.useState(0),[B,Je]=l.useState(1),[_,X]=l.useState({}),[be,Ge]=l.useState([]),[,Xe]=l.useState(0),[D,Ke]=l.useState("pending"),[fe,Qe]=l.useState([]),[,Ze]=l.useState(0),[K,es]=l.useState("pending"),[p,Q]=l.useState(null),[b,Z]=l.useState(null),[Ne,ss]=l.useState([]),[,ts]=l.useState(0),[ee,as]=l.useState("pending"),[ns,rs]=l.useState([]),[is,se]=l.useState(!1),[y,M]=l.useState({title:"",content:"",type:"info",targetAudience:"all",isDismissible:!0}),[ls,cs]=l.useState([]),[ds,os]=l.useState([]),[ms,te]=l.useState(!1),[h,V]=l.useState({telegramId:"",username:"",role:"moderator"});l.useEffect(()=>{xs()},[]),l.useEffect(()=>{if(!t)return;const s=ft({onNewUser:n=>{S(i=>[{type:"user",data:n,time:new Date},...i.slice(0,49)]),j(i=>i&&{...i,total_users:i.total_users+1,new_users_today:i.new_users_today+1})},onNewPost:n=>{S(i=>[{type:"post",data:n,time:new Date},...i.slice(0,49)]),j(i=>i&&{...i,total_posts:i.total_posts+1})},onNewMessage:n=>{S(i=>[{type:"message",data:n,time:new Date},...i.slice(0,49)])},onNewReport:n=>{S(i=>[{type:"report",data:n,time:new Date},...i.slice(0,49)]),j(i=>i&&{...i,pending_reports:i.pending_reports+1})},onNewFlagged:n=>{S(i=>[{type:"flagged",data:n,time:new Date},...i.slice(0,49)]),j(i=>i&&{...i,pending_flagged:i.pending_flagged+1})},onNewApplication:n=>{n.status==="pending"&&(S(i=>[{type:"application",data:n,time:new Date},...i.slice(0,49)]),j(i=>i&&{...i,pending_applications:i.pending_applications+1}))}});return()=>{s.unsubscribe()}},[t]);const xs=async()=>{const s=await Os(a);s&&(d(s),ve()),R(!1)},ve=async()=>{const[s,n]=await Promise.all([ut(),ht(10)]);j(s),T(n)},v=l.useCallback(async(s=1,n,i)=>{const{users:g,total:U}=await Hs(s,20,n,i);Me(g),Ie(U),Le(s)},[]),gs=l.useCallback(async(s=1)=>{const{conversations:n,total:i}=await Gs(s,50);ze(n),Oe(i)},[]),we=l.useCallback(async s=>{const{messages:n}=await Xs(s);je(n)},[]),w=l.useCallback(async(s=1,n)=>{const{posts:i,total:g}=await Qs(s,20,n);Ye(i),qe(g),Je(s)},[]),z=l.useCallback(async s=>{const{applications:n,total:i}=await tt(s);Ge(n),Xe(i)},[]),ae=l.useCallback(async s=>{const{reports:n,total:i}=await rt(s);Qe(n),Ze(i)},[]),ne=l.useCallback(async(s="pending")=>{const{flagged:n,total:i}=await ct(s);ss(n),ts(i)},[]),O=l.useCallback(async()=>{const s=await ot(!0);rs(s)},[]),re=l.useCallback(async()=>{const s=await jt();cs(s)},[]),us=l.useCallback(async()=>{const{logs:s}=await pt(1,100);os(s)},[]),ps=async s=>{const n=await Ws(s.telegram_id);$(n)},hs=async(s,n,i,g)=>{t&&(await qs(s,n,t.telegram_id,i,g),v(E,f,N),$(null))},js=async s=>{t&&(await Js(s,t.telegram_id),v(E,f,N),$(null))},ys=async s=>{t&&(await at(s.id,s.user_id,t.telegram_id),z(D),j(n=>n&&{...n,pending_applications:Math.max(0,n.pending_applications-1)}))},bs=async(s,n)=>{t&&(await nt(s.id,s.user_id,n,t.telegram_id),z(D),j(i=>i&&{...i,pending_applications:Math.max(0,i.pending_applications-1)}))},fs=async(s,n)=>{t&&(await Zs(s,n,t.telegram_id),w(B,_))},Ns=async s=>{t&&(await et(s,t.telegram_id),w(B,_))},vs=async s=>{t&&confirm("Permanently delete this post? This cannot be undone.")&&(await st(s,t.telegram_id),w(B,_))},ws=async s=>{Q(s);const{content:n}=await lt(s.reported_type,s.reported_id);Z(n)},H=async(s,n,i)=>{t&&(await it(s,{status:n,resolution_notes:i},t.telegram_id),ae(K),Q(null),Z(null),j(g=>g&&{...g,pending_reports:Math.max(0,g.pending_reports-1)}))},_e=async(s,n,i)=>{t&&(await dt(s,n,t.telegram_id,i),ne(ee),j(g=>g&&{...g,pending_flagged:Math.max(0,g.pending_flagged-1)}))},_s=async()=>{t&&y.title&&y.content&&(await mt(y.title,y.content,t.telegram_id,{type:y.type,targetAudience:y.targetAudience,isDismissible:y.isDismissible}),O(),se(!1),M({title:"",content:"",type:"info",targetAudience:"all",isDismissible:!0}))},Cs=async s=>{t&&confirm("Delete this announcement?")&&(await gt(s,t.telegram_id),O())},As=async s=>{t&&(await xt(s.id,{is_active:!s.is_active},t.telegram_id),O())},ks=async()=>{if(t&&h.telegramId){const s={view_users:!0,edit_users:h.role!=="moderator",ban_users:h.role!=="moderator",delete_posts:!0,manage_applications:h.role!=="moderator",view_messages:h.role==="super_admin",view_analytics:!0,manage_reports:!0,post_announcements:h.role!=="moderator",manage_admins:h.role==="super_admin"};await yt(Number(h.telegramId),h.username,h.role,s,t.telegram_id),re(),te(!1),V({telegramId:"",username:"",role:"moderator"})}},Ss=async s=>{t&&confirm("Remove this admin?")&&(await bt(s,t.telegram_id),re())},Us=async s=>{t&&confirm("Delete this message?")&&(await Ks(s,t.telegram_id),F&&we(F.id))};l.useEffect(()=>{t&&(x==="users"&&v(),x==="messages"&&gs(),x==="posts"&&w(),x==="applications"&&z(D),x==="reports"&&ae(K),x==="moderation"&&ne(ee),x==="announcements"&&O(),x==="settings"&&(re(),us()))},[x,t]);const C=s=>{const n=new Date(s),g=new Date().getTime()-n.getTime(),U=Math.floor(g/6e4);if(U<1)return"Just now";if(U<60)return`${U}m ago`;const Ce=Math.floor(U/60);return Ce<24?`${Ce}h ago`:n.toLocaleDateString()};if(u)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Verifying admin access..."})]})});if(!t)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(J,{className:"w-8 h-8 text-red-500"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"You don't have admin privileges."}),e.jsx("button",{onClick:r,className:"px-6 py-3 bg-gray-700 text-white rounded-xl font-semibold",children:"Go Back"})]})});const Ps=[{id:"dashboard",label:"Dashboard",icon:$s},{id:"users",label:"Users",icon:me},{id:"messages",label:"Messages",icon:oe,permission:"view_messages"},{id:"posts",label:"Posts",icon:xe},{id:"applications",label:"Applications",icon:L,badge:o?.pending_applications},{id:"reports",label:"Reports",icon:ge,badge:o?.pending_reports},{id:"moderation",label:"Moderation",icon:J,badge:o?.pending_flagged},{id:"announcements",label:"Announce",icon:Fs,permission:"post_announcements"},{id:"settings",label:"Settings",icon:Ds}].filter(s=>!s.permission||t.permissions[s.permission]);return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsxs("header",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3 flex items-center justify-between sticky top-0 z-40",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-lg",children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-lg flex items-center gap-2",children:["Admin Panel",e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse",title:"Real-time connected"})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[t.username," (",t.role,")"]})]})]}),e.jsx("button",{onClick:ve,className:"p-2 hover:bg-gray-700 rounded-lg",children:e.jsx(Ms,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"bg-gray-800 px-2 py-2 flex gap-1 overflow-x-auto border-b border-gray-700 sticky top-[60px] z-30",children:Ps.map(s=>e.jsxs("button",{onClick:()=>A(s.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors relative ${x===s.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.badge&&s.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:s.badge>99?"99+":s.badge})]},s.id))}),e.jsxs("main",{className:"p-4 pb-20",children:[x==="dashboard"&&e.jsxs("div",{className:"space-y-4",children:[o&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.jsx(P,{icon:me,label:"Total Users",value:o.total_users,sub:`+${o.new_users_today} today`,color:"blue"}),e.jsx(P,{icon:L,label:"Creators",value:o.total_creators,color:"purple"}),e.jsx(P,{icon:xe,label:"Total Posts",value:o.total_posts,sub:`+${o.new_posts_week} this week`,color:"green"}),e.jsx(P,{icon:ue,label:"Active Today",value:o.active_users_today,color:"cyan"}),e.jsx(P,{icon:oe,label:"Messages/Week",value:o.messages_week,color:"pink"}),e.jsx(P,{icon:Is,label:"New Users/Week",value:o.new_users_week,color:"orange"})]}),o&&(o.pending_applications>0||o.pending_reports>0||o.pending_flagged>0)&&e.jsxs("div",{className:"space-y-2",children:[o.pending_applications>0&&e.jsx(ce,{icon:L,color:"yellow",text:`${o.pending_applications} pending application(s) need review`,onClick:()=>A("applications")}),o.pending_reports>0&&e.jsx(ce,{icon:ge,color:"orange",text:`${o.pending_reports} report(s) need attention`,onClick:()=>A("reports")}),o.pending_flagged>0&&e.jsx(ce,{icon:J,color:"red",text:`${o.pending_flagged} flagged content in moderation queue`,onClick:()=>A("moderation")})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-green-400"}),"Live Activity Feed"]}),e.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[G.length===0&&k&&e.jsxs(e.Fragment,{children:[k.recentUsers.slice(0,5).map((s,n)=>e.jsx(de,{type:"user",data:s,time:s.created_at},`u-${n}`)),k.recentPosts.slice(0,5).map((s,n)=>e.jsx(de,{type:"post",data:s,time:s.created_at},`p-${n}`))]}),G.map((s,n)=>e.jsx(de,{type:s.type,data:s.data,time:s.time},n)),G.length===0&&!k&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"Waiting for activity..."})]})]})]}),x==="users"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:f,onChange:s=>Ee(s.target.value),onKeyDown:s=>s.key==="Enter"&&v(1,f,N),placeholder:"Search by name, username, or ID...",className:"w-full pl-10 pr-4 py-3 bg-gray-800 rounded-xl border border-gray-700 focus:border-blue-500 outline-none"})]}),e.jsx("button",{onClick:()=>v(1,f,N),className:"px-4 py-3 bg-blue-600 rounded-xl",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","creators","verified","banned"].map(s=>e.jsx("button",{onClick:()=>{Be(s==="all"?"":s),v(1,f,s==="all"?"":s)},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${N===s||N===""&&s==="all"?"bg-blue-600 text-white":"bg-gray-800 text-gray-400"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),e.jsxs("div",{className:"text-sm text-gray-400",children:[pe," users total"]}),e.jsx("div",{className:"space-y-2",children:De.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatar_url||`https://i.pravatar.cc/150?u=${s.telegram_id}`,alt:"",className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[s.first_name,s.is_creator&&e.jsx("span",{className:"text-xs bg-purple-500 px-2 py-0.5 rounded",children:"Creator"}),s.is_verified&&e.jsx("span",{className:"text-xs bg-blue-500 px-2 py-0.5 rounded",children:"Verified"}),s.is_banned&&e.jsx("span",{className:"text-xs bg-red-500 px-2 py-0.5 rounded",children:"Banned"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["@",s.username||s.telegram_id]})]})]}),e.jsx("button",{onClick:()=>ps(s),className:"p-2 hover:bg-gray-700 rounded-lg",children:e.jsx(ie,{className:"w-5 h-5"})})]},s.telegram_id))}),e.jsx(Te,{page:E,total:pe,limit:20,onPageChange:s=>v(s,f,N)})]}),x==="messages"&&t.permissions.view_messages&&e.jsx("div",{className:"space-y-4",children:F?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>{he(null),je([])},className:"p-2 hover:bg-gray-700 rounded-lg",children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-lg font-bold",children:[F.participant1?.first_name," & ",F.participant2?.first_name]})]}),e.jsx("div",{className:"bg-gray-800 rounded-xl p-4 max-h-[60vh] overflow-y-auto space-y-3",children:He.map(s=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:s.sender?.avatar_url||`https://i.pravatar.cc/150?u=${s.sender_id}`,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:s.sender?.first_name}),e.jsx("span",{className:"text-xs text-gray-500",children:C(s.created_at)})]}),s.content&&e.jsx("p",{className:"text-sm mt-1",children:s.content}),s.media_url&&e.jsx("img",{src:s.media_url,className:"mt-2 max-w-xs rounded-lg"})]}),e.jsx("button",{onClick:()=>Us(s.id),className:"p-1 hover:bg-red-500/20 rounded text-red-400",children:e.jsx(le,{className:"w-4 h-4"})})]},s.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold",children:"All Conversations"}),e.jsx("div",{className:"space-y-2",children:Ve.map(s=>e.jsx("div",{onClick:()=>{he(s),we(s.id)},className:"bg-gray-800 rounded-xl p-4 cursor-pointer hover:bg-gray-750",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:s.participant1?.avatar_url||`https://i.pravatar.cc/150?u=${s.participant1_id}`,className:"w-8 h-8 rounded-full border-2 border-gray-800"}),e.jsx("img",{src:s.participant2?.avatar_url||`https://i.pravatar.cc/150?u=${s.participant2_id}`,className:"w-8 h-8 rounded-full border-2 border-gray-800"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-sm",children:[s.participant1?.first_name," & ",s.participant2?.first_name]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Last message: ",C(s.last_message_at)]})]}),e.jsx(Fe,{className:"w-5 h-5 text-gray-400"})]})},s.id))})]})}),x==="posts"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>{X({}),w(1,{})},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${Object.keys(_).length===0?"bg-blue-600 text-white":"bg-gray-800 text-gray-400"}`,children:"All"}),e.jsx("button",{onClick:()=>{X({is_nsfw:!0}),w(1,{is_nsfw:!0})},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${_.is_nsfw?"bg-red-600 text-white":"bg-gray-800 text-gray-400"}`,children:"NSFW"}),e.jsx("button",{onClick:()=>{X({is_hidden:!0}),w(1,{is_hidden:!0})},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${_.is_hidden?"bg-yellow-600 text-white":"bg-gray-800 text-gray-400"}`,children:"Hidden"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[ye," posts total"]}),e.jsx("div",{className:"space-y-3",children:We.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.creator?.avatar_url||`https://i.pravatar.cc/150?u=${s.creator_id}`,className:"w-8 h-8 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:s.creator?.first_name||"Unknown"}),e.jsx("div",{className:"text-xs text-gray-400",children:C(s.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.is_nsfw&&e.jsx("span",{className:"text-xs bg-red-500 px-2 py-0.5 rounded",children:"NSFW"}),s.is_hidden&&e.jsx("span",{className:"text-xs bg-yellow-500 px-2 py-0.5 rounded",children:"Hidden"}),s.visibility!=="public"&&e.jsx("span",{className:"text-xs bg-purple-500 px-2 py-0.5 rounded",children:s.visibility})]})]}),s.content&&e.jsx("p",{className:"text-sm mb-3 line-clamp-3",children:s.content}),s.media_url&&e.jsx("img",{src:s.media_url,className:"w-full h-40 object-cover rounded-lg mb-3"}),e.jsxs("div",{className:"flex gap-2",children:[s.is_hidden?e.jsxs("button",{onClick:()=>Ns(s.id),className:"flex-1 py-2 bg-green-600 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Unhide"]}):e.jsxs("button",{onClick:()=>{const n=prompt("Reason for hiding:");n&&fs(s.id,n)},className:"flex-1 py-2 bg-yellow-600 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Hide"]}),e.jsxs("button",{onClick:()=>vs(s.id),className:"flex-1 py-2 bg-red-600 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Delete"]})]})]},s.id))}),e.jsx(Te,{page:B,total:ye,limit:20,onPageChange:s=>w(s,_)})]}),x==="applications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["pending","approved","rejected","all"].map(s=>e.jsx("button",{onClick:()=>{Ke(s==="all"?"":s),z(s==="all"?void 0:s)},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${D===s||D===""&&s==="all"?"bg-blue-600 text-white":"bg-gray-800 text-gray-400"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),e.jsxs("div",{className:"space-y-3",children:[be.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.user?.avatar_url||`https://i.pravatar.cc/150?u=${s.user_id}`,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.legal_name}),e.jsxs("div",{className:"text-sm text-gray-400",children:["@",s.user?.username||s.user_id]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="pending"?"bg-yellow-500/20 text-yellow-400":s.status==="approved"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s.status}),s.verification_status&&e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs ${s.verification_status==="approved"?"bg-green-500/10 text-green-400":s.verification_status==="rejected"?"bg-red-500/10 text-red-400":"bg-yellow-500/10 text-yellow-400"}`,children:["ID: ",s.verification_status]})]})]}),s.verification_image_url&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Verification Photo:"}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.verification_image_url,alt:"Verification",className:"w-full max-w-[200px] h-auto rounded-lg object-cover border border-gray-700",onClick:()=>window.open(s.verification_image_url,"_blank"),style:{cursor:"pointer"}}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Click to view full size"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Type:"})," ",e.jsx("span",{className:s.content_type==="nsfw"?"text-red-400":"",children:s.content_type.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"AI:"})," ",s.is_ai_generated?"Yes":"No"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Country:"})," ",s.country]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"City:"})," ",s.city||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Email:"})," ",s.email]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"})," ",s.phone||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"DOB:"})," ",s.date_of_birth||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Applied:"})," ",s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"]})]}),e.jsxs("div",{className:"text-sm text-gray-400 mb-3",children:["Categories: ",s.content_categories?.join(", ")||"None"]}),(s.instagram_url||s.twitter_url||s.tiktok_url)&&e.jsxs("div",{className:"text-sm mb-3 flex flex-wrap gap-2",children:[s.instagram_url&&e.jsx("a",{href:s.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"text-pink-400 hover:underline",children:"Instagram"}),s.twitter_url&&e.jsx("a",{href:s.twitter_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Twitter"}),s.tiktok_url&&e.jsx("a",{href:s.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"text-white hover:underline",children:"TikTok"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-2 mb-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Legal Agreements:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsxs("span",{className:`px-1.5 py-0.5 rounded text-xs ${s.age_confirmed?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:["Age ",s.age_confirmed?"✓":"✗"]}),e.jsxs("span",{className:`px-1.5 py-0.5 rounded text-xs ${s.terms_accepted?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:["Terms ",s.terms_accepted?"✓":"✗"]}),e.jsxs("span",{className:`px-1.5 py-0.5 rounded text-xs ${s.privacy_policy_accepted?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:["Privacy ",s.privacy_policy_accepted?"✓":"✗"]}),e.jsxs("span",{className:`px-1.5 py-0.5 rounded text-xs ${s.content_policy_accepted?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:["Content ",s.content_policy_accepted?"✓":"✗"]}),e.jsxs("span",{className:`px-1.5 py-0.5 rounded text-xs ${s.data_processing_consent?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:["GDPR ",s.data_processing_consent?"✓":"✗"]})]})]}),s.status==="rejected"&&s.rejection_reason&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-2 mb-3",children:[e.jsx("div",{className:"text-xs text-red-400",children:"Rejection Reason:"}),e.jsx("div",{className:"text-sm text-red-300",children:s.rejection_reason})]}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>ys(s),className:"flex-1 py-2 bg-green-600 rounded-lg font-semibold flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>{const n=prompt("Rejection reason:");n&&bs(s,n)},className:"flex-1 py-2 bg-red-600 rounded-lg font-semibold flex items-center justify-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Reject"]})]})]},s.id)),be.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No applications found"})]})]}),x==="reports"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["pending","reviewing","resolved","dismissed"].map(s=>e.jsx("button",{onClick:()=>{es(s),ae(s)},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${K===s?"bg-blue-600 text-white":"bg-gray-800 text-gray-400"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),e.jsxs("div",{className:"space-y-3",children:[fe.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.priority==="critical"?"bg-red-500/20 text-red-400":s.priority==="high"?"bg-orange-500/20 text-orange-400":s.priority==="normal"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:s.priority}),e.jsx("span",{className:"text-sm font-medium",children:s.reason})]}),e.jsx("span",{className:"text-xs text-gray-400",children:C(s.created_at)})]}),e.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:[e.jsx("span",{className:"capitalize",children:s.reported_type})," #",s.reported_id]}),s.description&&e.jsx("p",{className:"text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>ws(s),className:"flex-1 py-2 bg-gray-700 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"View Content"]}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>H(s.id,"resolved"),className:"py-2 px-4 bg-green-600 rounded-lg text-sm font-medium",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>H(s.id,"dismissed"),className:"py-2 px-4 bg-gray-600 rounded-lg text-sm font-medium",children:e.jsx(I,{className:"w-4 h-4"})})]})]})]},s.id)),fe.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No reports found"})]})]}),x==="moderation"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["pending","approved","rejected"].map(s=>e.jsx("button",{onClick:()=>{as(s),ne(s)},className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${ee===s?"bg-blue-600 text-white":"bg-gray-800 text-gray-400"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),e.jsxs("div",{className:"space-y-3",children:[Ne.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.user?.avatar_url||`https://i.pravatar.cc/150?u=${s.user_id}`,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s.user?.first_name||"Unknown"}),e.jsxs("div",{className:"text-xs text-gray-400 capitalize",children:[s.content_type," - ",C(s.created_at)]})]})]}),e.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded text-xs",children:"AI Flagged"})]}),e.jsxs("div",{className:"text-sm mb-3",children:[e.jsx("span",{className:"text-red-400 font-medium",children:"Reason:"})," ",s.flag_reason]}),s.media_url&&e.jsxs("div",{className:"mb-3 relative",children:[e.jsx("img",{src:s.media_url,className:"w-full h-48 object-cover rounded-lg blur-lg"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("button",{onClick:n=>{n.currentTarget.previousElementSibling.classList.toggle("blur-lg")},className:"px-4 py-2 bg-black/50 rounded-lg text-sm",children:"Click to reveal"})})]}),s.text_content&&e.jsx("p",{className:"text-sm mb-3 bg-gray-900 p-2 rounded",children:s.text_content}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>_e(s.id,"approved","Content is acceptable"),className:"flex-1 py-2 bg-green-600 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>_e(s.id,"rejected","Violates guidelines"),className:"flex-1 py-2 bg-red-600 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Remove"]})]})]},s.id)),Ne.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No flagged content"})]})]}),x==="announcements"&&t.permissions.post_announcements&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>se(!0),className:"w-full py-3 bg-blue-600 rounded-xl font-semibold flex items-center justify-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"New Announcement"]}),e.jsx("div",{className:"space-y-3",children:ns.map(s=>e.jsxs("div",{className:`bg-gray-800 rounded-xl p-4 ${s.is_active?"":"opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.type==="warning"?"bg-yellow-500/20 text-yellow-400":s.type==="maintenance"?"bg-red-500/20 text-red-400":s.type==="promotion"?"bg-purple-500/20 text-purple-400":s.type==="update"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:s.type}),e.jsx("span",{className:"text-xs text-gray-400",children:s.target_audience})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>As(s),className:`p-1 rounded ${s.is_active?"text-green-400":"text-gray-500"}`,children:s.is_active?e.jsx(ie,{className:"w-4 h-4"}):e.jsx(Pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Cs(s.id),className:"p-1 text-red-400",children:e.jsx(le,{className:"w-4 h-4"})})]})]}),e.jsx("h3",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-400",children:s.content})]},s.id))})]}),x==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Your Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(t.permissions).map(([s,n])=>e.jsxs("div",{className:"flex items-center gap-2",children:[n?e.jsx(Y,{className:"w-4 h-4 text-green-400"}):e.jsx(I,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-gray-400",children:s.replace(/_/g," ")})]},s))})]}),t.permissions.manage_admins&&e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold",children:"Admin Users"}),e.jsx("button",{onClick:()=>te(!0),className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(ke,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:ls.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.username||s.telegram_id}),e.jsx("div",{className:"text-xs text-gray-400",children:s.role})]}),s.telegram_id!==t.telegram_id&&e.jsx("button",{onClick:()=>Ss(s.telegram_id),className:"p-1 text-red-400",children:e.jsx(Ls,{className:"w-4 h-4"})})]},s.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Recent Admin Activity"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:ds.slice(0,20).map(s=>e.jsxs("div",{className:"text-sm p-2 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:s.action.replace(/_/g," ")}),e.jsx("span",{className:"text-xs text-gray-500",children:C(s.created_at)})]}),s.target_type&&e.jsxs("div",{className:"text-xs text-gray-400",children:[s.target_type," #",s.target_id]})]},s.id))})]})]})]}),e.jsx(W,{children:m&&e.jsx(q,{onClose:()=>$(null),title:"User Details",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:m.user.avatar_url||`https://i.pravatar.cc/150?u=${m.user.telegram_id}`,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg",children:[m.user.first_name," ",m.user.last_name]}),e.jsxs("p",{className:"text-gray-400",children:["@",m.user.username||m.user.telegram_id]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",m.user.telegram_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold",children:m.posts?.length||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Posts"})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold",children:m.followers?.length||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Followers"})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold",children:m.following?.length||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Following"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Balance"}),e.jsxs("span",{children:[m.user.balance," stars"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Creator"}),e.jsx("span",{children:m.user.is_creator?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Verified"}),e.jsx("span",{children:m.user.is_verified?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Banned"}),e.jsx("span",{className:m.user.is_banned?"text-red-400":"",children:m.user.is_banned?"Yes":"No"})]})]}),m.bans?.length>0&&e.jsxs("div",{className:"bg-red-500/10 rounded-lg p-3",children:[e.jsx("h5",{className:"text-red-400 font-medium mb-2",children:"Ban History"}),m.bans.map(s=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.reason}),e.jsx("div",{className:"text-xs text-gray-500",children:C(s.banned_at)})]},s.id))]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-700",children:[m.user.is_banned?e.jsxs("button",{onClick:()=>js(m.user.telegram_id),className:"flex-1 py-3 bg-green-600 rounded-xl font-semibold flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Unban"]}):e.jsxs("button",{onClick:()=>{const s=prompt("Ban reason:");s&&hs(m.user.telegram_id,s,!0)},className:"flex-1 py-3 bg-red-600 rounded-xl font-semibold flex items-center justify-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"}),"Ban User"]}),e.jsxs("button",{onClick:async()=>{await Ys(m.user.telegram_id,{is_creator:!0,is_verified:!0},t.telegram_id),alert("User is now a verified creator"),$(null),v(E,f,N)},className:"flex-1 py-3 bg-purple-600 rounded-xl font-semibold flex items-center justify-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Make Creator"]})]})]})})}),e.jsx(W,{children:p&&e.jsx(q,{onClose:()=>{Q(null),Z(null)},title:"Report Details",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Reported:"})," ",e.jsx("span",{className:"capitalize",children:p.reported_type})," #",p.reported_id]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Reason:"})," ",p.reason]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Priority:"})," ",e.jsx("span",{className:p.priority==="critical"?"text-red-400":p.priority==="high"?"text-orange-400":"",children:p.priority})]})]}),p.description&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm text-gray-400 mb-1",children:"Description:"}),e.jsx("p",{className:"text-sm bg-gray-700 p-2 rounded",children:p.description})]}),b&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm text-gray-400 mb-1",children:"Content:"}),e.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[p.reported_type==="post"&&e.jsxs(e.Fragment,{children:[b.content&&e.jsx("p",{className:"text-sm mb-2",children:b.content}),b.media_url&&e.jsx("img",{src:b.media_url,className:"max-h-48 rounded"})]}),p.reported_type==="user"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:b.avatar_url,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:b.first_name}),e.jsxs("div",{className:"text-sm text-gray-400",children:["@",b.username]})]})]}),p.reported_type==="message"&&e.jsx("p",{className:"text-sm",children:b.content})]})]}),p.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>H(p.id,"resolved","Action taken"),className:"flex-1 py-3 bg-green-600 rounded-xl font-semibold",children:"Resolve"}),e.jsx("button",{onClick:()=>H(p.id,"dismissed","Not a violation"),className:"flex-1 py-3 bg-gray-600 rounded-xl font-semibold",children:"Dismiss"})]})]})})}),e.jsx(W,{children:is&&e.jsx(q,{onClose:()=>se(!1),title:"New Announcement",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:y.title,onChange:s=>M(n=>({...n,title:s.target.value})),placeholder:"Title",className:"w-full px-4 py-3 bg-gray-700 rounded-xl border border-gray-600 focus:border-blue-500 outline-none"}),e.jsx("textarea",{value:y.content,onChange:s=>M(n=>({...n,content:s.target.value})),placeholder:"Content...",rows:4,className:"w-full px-4 py-3 bg-gray-700 rounded-xl border border-gray-600 focus:border-blue-500 outline-none resize-none"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("select",{value:y.type,onChange:s=>M(n=>({...n,type:s.target.value})),className:"px-4 py-3 bg-gray-700 rounded-xl border border-gray-600",children:[e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"update",children:"Update"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"promotion",children:"Promotion"})]}),e.jsxs("select",{value:y.targetAudience,onChange:s=>M(n=>({...n,targetAudience:s.target.value})),className:"px-4 py-3 bg-gray-700 rounded-xl border border-gray-600",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"creators",children:"Creators Only"}),e.jsx("option",{value:"subscribers",children:"Subscribers"}),e.jsx("option",{value:"new_users",children:"New Users"})]})]}),e.jsx("button",{onClick:_s,className:"w-full py-3 bg-blue-600 rounded-xl font-semibold",children:"Post Announcement"})]})})}),e.jsx(W,{children:ms&&e.jsx(q,{onClose:()=>te(!1),title:"Add Admin",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:h.telegramId,onChange:s=>V(n=>({...n,telegramId:s.target.value})),placeholder:"Telegram ID",className:"w-full px-4 py-3 bg-gray-700 rounded-xl border border-gray-600 focus:border-blue-500 outline-none"}),e.jsx("input",{type:"text",value:h.username,onChange:s=>V(n=>({...n,username:s.target.value})),placeholder:"Username",className:"w-full px-4 py-3 bg-gray-700 rounded-xl border border-gray-600 focus:border-blue-500 outline-none"}),e.jsxs("select",{value:h.role,onChange:s=>V(n=>({...n,role:s.target.value})),className:"w-full px-4 py-3 bg-gray-700 rounded-xl border border-gray-600",children:[e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"super_admin",children:"Super Admin"})]}),e.jsx("button",{onClick:ks,className:"w-full py-3 bg-blue-600 rounded-xl font-semibold",children:"Add Admin"})]})})})]})}function P({icon:a,label:r,value:t,sub:d,color:u}){const R={blue:"text-blue-400",purple:"text-purple-400",green:"text-green-400",cyan:"text-cyan-400",pink:"text-pink-400",orange:"text-orange-400"};return e.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${R[u]} text-sm mb-1`,children:[e.jsx(a,{className:"w-4 h-4"}),r]}),e.jsx("div",{className:"text-2xl font-bold",children:t.toLocaleString()}),d&&e.jsx("div",{className:"text-xs text-green-400",children:d})]})}function ce({icon:a,color:r,text:t,onClick:d}){const u={yellow:"bg-yellow-500/20 border-yellow-500/30 text-yellow-400",orange:"bg-orange-500/20 border-orange-500/30 text-orange-400",red:"bg-red-500/20 border-red-500/30 text-red-400"};return e.jsxs("button",{onClick:d,className:`w-full p-4 border rounded-xl flex items-center justify-between ${u[r]}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{children:t})]}),e.jsx(Fe,{className:"w-5 h-5"})]})}function de({type:a,data:r,time:t}){const u={user:me,post:xe,message:oe,report:ge,flagged:J,application:L}[a]||ue,R={user:"New user registered",post:"New post created",message:"New message sent",report:"New report submitted",flagged:"Content flagged by AI",application:"New creator application"},x=A=>{const o=new Date(A),k=new Date().getTime()-o.getTime(),T=Math.floor(k/6e4);return T<1?"Just now":T<60?`${T}m ago`:o.toLocaleTimeString()};return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-900 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-lg ${a==="report"||a==="flagged"?"bg-red-500/20":a==="user"?"bg-blue-500/20":a==="application"?"bg-yellow-500/20":"bg-gray-700"}`,children:e.jsx(u,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm truncate",children:R[a]}),e.jsx("div",{className:"text-xs text-gray-500",children:r?.first_name||r?.username||`#${r?.id}`})]}),e.jsx("div",{className:"text-xs text-gray-500",children:x(t)})]})}function Te({page:a,total:r,limit:t,onPageChange:d}){const u=Math.ceil(r/t);return u<=1?null:e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>d(a-1),disabled:a===1,className:"px-4 py-2 bg-gray-800 rounded-lg disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2",children:["Page ",a," of ",u]}),e.jsx("button",{onClick:()=>d(a+1),disabled:a>=u,className:"px-4 py-2 bg-gray-800 rounded-lg disabled:opacity-50",children:"Next"})]})}function q({children:a,onClose:r,title:t}){return e.jsx(Se.div,{className:"fixed inset-0 bg-black/80 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx("div",{className:"min-h-screen p-4 flex items-start justify-center pt-20",children:e.jsxs(Se.div,{className:"bg-gray-800 rounded-2xl max-w-lg w-full",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:t}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-700 rounded-lg",children:e.jsx(I,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4",children:a})]})})})}export{Mt as default};
