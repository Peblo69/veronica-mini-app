import{c as l,r as x,aa as N,ab as k,ac as _,j as a,A as u,m as r,X as F,C as M,a6 as L,a8 as B}from"./index-BNIw4U_K-1765313534941.js";const $=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],E=l("arrow-down-left",$);const C=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],V=l("arrow-up-right",C);const z=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],W=l("bookmark",z);const A=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],q=l("grid-3x3",A);const P=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],G=l("trending-up",P);const S=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],H=l("wallet",S);function R({isOpen:h,onClose:d,userId:m,currentUserId:s,type:c,onUserClick:p}){const[f,o]=x.useState([]),[b,g]=x.useState(!0);x.useEffect(()=>{h&&v()},[h,m,c]);const v=async()=>{g(!0);const e=c==="followers"?await N(m,200):await k(m,200),n=await Promise.all(e.map(async i=>{if(i.telegram_id===s)return{...i,isFollowedByMe:!1};const t=await _(s,i.telegram_id);return{...i,isFollowedByMe:t}}));o(n),g(!1)},y=async(e,n)=>{n.stopPropagation(),o(i=>i.map(t=>t.telegram_id===e.telegram_id?{...t,followLoading:!0}:t));try{e.isFollowedByMe?(await L(s,e.telegram_id),o(i=>i.map(t=>t.telegram_id===e.telegram_id?{...t,isFollowedByMe:!1,followLoading:!1}:t))):(await B(s,e.telegram_id),o(i=>i.map(t=>t.telegram_id===e.telegram_id?{...t,isFollowedByMe:!0,followLoading:!1}:t)))}catch(i){console.error("Follow/unfollow error:",i),o(t=>t.map(w=>w.telegram_id===e.telegram_id?{...w,followLoading:!1}:w))}},j=e=>{p&&(p(e),d())};return a.jsx(u,{children:h&&a.jsxs(a.Fragment,{children:[a.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[100]",onClick:d}),a.jsx(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25,stiffness:350},className:"fixed inset-0 z-[101] flex items-center justify-center p-4",onClick:d,children:a.jsxs("div",{className:"bg-[#1a1a1f] rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-white/10",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[a.jsx("span",{className:"text-lg font-semibold text-white capitalize",children:c}),a.jsx(r.button,{whileTap:{scale:.9},onClick:d,className:"w-9 h-9 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/15 transition-colors",children:a.jsx(F,{className:"w-5 h-5 text-white"})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[70vh] min-h-[200px]",children:b?a.jsx("div",{className:"p-4 space-y-3",children:[1,2,3,4,5].map(e=>a.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-white/10 rounded w-28 mb-1.5"}),a.jsx("div",{className:"h-3 bg-white/10 rounded w-20"})]}),a.jsx("div",{className:"w-20 h-8 bg-white/10 rounded-lg"})]},e))}):f.length===0?a.jsx("div",{className:"py-20 text-center",children:a.jsx("p",{className:"text-white/40 text-sm",children:c==="followers"?"No followers yet":"Not following anyone"})}):a.jsx("div",{className:"p-3 space-y-1",children:f.map(e=>a.jsxs("div",{className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-white/5 active:bg-white/10 transition-colors cursor-pointer",onClick:()=>j(e),children:[a.jsx("img",{src:e.avatar_url||`https://i.pravatar.cc/150?u=${e.telegram_id}`,alt:e.first_name||"User",className:"w-12 h-12 rounded-full object-cover border border-white/10 shrink-0"}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsxs("span",{className:"font-semibold text-white text-[15px] truncate",children:[e.first_name," ",e.last_name]}),e.is_verified&&a.jsx(M,{className:"w-4 h-4 text-blue-400 fill-blue-400 shrink-0"})]}),a.jsx("div",{className:"text-sm text-white/50 truncate",children:e.username?`@${e.username}`:e.is_creator?"Creator":"User"})]}),e.telegram_id!==s&&a.jsx(r.button,{whileTap:{scale:.95},onClick:n=>y(e,n),disabled:e.followLoading,className:`px-4 py-1.5 rounded-lg text-sm font-semibold transition-colors shrink-0 min-w-[90px] ${e.followLoading?"bg-white/10 text-white/50":e.isFollowedByMe?"bg-white/10 text-white hover:bg-white/15":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e.followLoading?a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white/30 border-t-white/70 rounded-full animate-spin"}):e.isFollowedByMe?"Following":"Follow"})]},e.telegram_id))})})]})})]})})}export{E as A,W as B,R as F,q as G,G as T,H as W,V as a};
