import{x as Fe,y as ye,z as Te,B as De,c as K,r as l,D as Ie,E as ze,F as pe,j as e,A as q,m as _,T as Ae,X as be,G as Ve,H as Be,I as Ge,J as We}from"./index-D-l1rzy_-1765554650217.js";import{a as He}from"./moderation-Cyx-wVK9-1765554650217.js";import{L as z}from"./loader-circle-CetrmkP4-1765554650217.js";import{I as qe}from"./image-lVRIVwZ4-1765554650217.js";import{P as le}from"./play-CanycYe3-1765554650217.js";import{C as Je}from"./camera-DaKz2BoB-1765554650217.js";import{C as ge}from"./chevron-down-DHFszNhM-1765554650217.js";import{C as Ke}from"./chevron-left-KtA17Jbz-1765554650217.js";import{S as Xe}from"./sun-CjwaF68N-1765554650217.js";import{G as we}from"./globe-DLJtq0sA-1765554650217.js";import{U as ve}from"./users-C40SGZdM-1765554650217.js";import{S as je}from"./star-CJI7eLE--1765554650217.js";import{C as Ye}from"./check-CNkNzQqE-1765554650217.js";function Ze(i){i.values.forEach(o=>o.stop())}function oe(i,o){[...o].reverse().forEach(g=>{const y=i.getVariant(g);y&&ye(i,y),i.variantChildren&&i.variantChildren.forEach(f=>{oe(f,o)})})}function Qe(i,o){if(Array.isArray(o))return oe(i,o);if(typeof o=="string")return oe(i,[o]);ye(i,o)}function et(){const i=new Set,o={subscribe(r){return i.add(r),()=>void i.delete(r)},start(r,g){const y=[];return i.forEach(f=>{y.push(Fe(f,r,{transitionOverride:g}))}),Promise.all(y)},set(r){return i.forEach(g=>{Qe(g,r)})},stop(){i.forEach(r=>{Ze(r)})},mount(){return()=>{o.stop()}}};return o}function tt(){const i=Te(et);return De(i.mount,[]),i}const st=tt;const it=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]],at=K("contrast",it);const rt=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],nt=K("droplets",rt);const lt=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],ot=K("sliders-horizontal",lt);const ct=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],dt=K("thermometer",ct),R=[{id:"normal",name:"Normal",filter:"none"},{id:"vivid",name:"Vivid",filter:"saturate(1.3) contrast(1.1)"},{id:"warm",name:"Warm",filter:"sepia(0.2) saturate(1.1) brightness(1.05)"},{id:"cool",name:"Cool",filter:"saturate(0.9) hue-rotate(10deg) brightness(1.05)"},{id:"bw",name:"B&W",filter:"grayscale(1) contrast(1.1)"},{id:"vintage",name:"Vintage",filter:"sepia(0.4) contrast(0.9) brightness(0.95)"},{id:"fade",name:"Fade",filter:"contrast(0.85) brightness(1.1) saturate(0.8)"},{id:"dramatic",name:"Dramatic",filter:"contrast(1.3) saturate(1.2) brightness(0.95)"},{id:"noir",name:"Noir",filter:"grayscale(1) contrast(1.4) brightness(0.9)"}],J={brightness:100,contrast:100,saturation:100,warmth:0};function ht(i){return new Promise(o=>{const r=document.createElement("img");r.onload=()=>{o({width:r.naturalWidth,height:r.naturalHeight,sizeBytes:i.size}),URL.revokeObjectURL(r.src)},r.onerror=()=>o({width:0,height:0,sizeBytes:i.size}),r.src=URL.createObjectURL(i)})}function mt(i){return new Promise(o=>{const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>{o({width:r.videoWidth,height:r.videoHeight,duration:Math.round(r.duration),sizeBytes:i.size}),URL.revokeObjectURL(r.src)},r.onerror=()=>o({width:0,height:0,sizeBytes:i.size}),r.src=URL.createObjectURL(i)})}const A=[],n=i=>{const o=new Date().toLocaleTimeString();A.push(`[${o}] ${i}`),A.length>20&&A.shift(),console.log(i),window.dispatchEvent(new CustomEvent("debug-log"))};function Et({user:i,mode:o="media"}){const r=o==="text",[g,y]=l.useState("select"),[f,X]=l.useState(""),[a,M]=l.useState([]),[d,ce]=l.useState(0),[N,O]=l.useState("public"),[Ne,Y]=l.useState("public"),[ke,Z]=l.useState(!1),[k,F]=l.useState("normal"),[h,C]=l.useState(J),[Q,Se]=l.useState(!1),[ee,V]=l.useState(!1),[B,S]=l.useState(null),[w,L]=l.useState("idle"),[de,te]=l.useState(null),[se,he]=l.useState(!1),[,Ce]=l.useState(0);l.useEffect(()=>{const t=()=>Ce(s=>s+1);return window.addEventListener("debug-log",t),()=>window.removeEventListener("debug-log",t)},[]);const E=l.useRef(null),T=l.useRef(null),ie=l.useRef(null),U=st(),[Ee,me]=l.useState(!1),G=i.is_creator;l.useEffect(()=>{let t=!0;if(!G){Y("public"),O("public");return}return Ie(i.telegram_id).then(s=>{if(!t||!s)return;const c=s.default_post_visibility||"public";Y(c),O(c)}).catch(()=>{t&&(Y("public"),O("public"))}),()=>{t=!1}},[i.telegram_id,G]),l.useEffect(()=>{T.current&&(T.current.style.height="auto",T.current.style.height=T.current.scrollHeight+"px")},[f]),l.useEffect(()=>{if(ie.current&&g==="edit"){const t=R.findIndex(c=>c.id===k),s=ie.current.children[t];s&&s.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[k,g]);const ae=l.useCallback(async t=>{n("handleFileSelect called");const s=t.target,c=Array.from(s?.files||[]);if(n(`Files: ${c.length} - ${c.map(m=>m.type).join(", ")}`),c.length===0)return;s&&(s.value="");const x=4-a.length,D=c.slice(0,x);for(const m of D){n(`Processing: ${m.name} (${m.type})`);const v=ze(m);if(n(`Type: ${v}`),v==="unknown"){n("SKIP: unknown type");continue}L("checking"),te(null),n("Status: checking");const W=URL.createObjectURL(m);n("Preview URL: created");let j,$;if(v==="image")n("Getting image metadata..."),j=await ht(m),n(`Metadata: ${j.width}x${j.height}`);else if(v==="video"){n("Getting video metadata..."),j=await mt(m),n(`Video: ${j.width}x${j.height}, ${j.duration}s`),n("Generating thumbnail...");const u=await pe(m);n(`Thumbnail: ${u?"OK":"FAILED"}`),u&&($={file:u,preview:URL.createObjectURL(u)})}const P={file:m,preview:W,type:v,metadata:j,thumbnail:$};n("MediaFile created");try{n("Guardrail: SKIPPED"),n("APPROVED - adding to state"),L("approved"),M(p=>[...p,P]),n("SUCCESS - file added!")}catch(u){n(`ERROR: ${u?.message||u}`),L("approved"),M(b=>[...b,P]),n("Added anyway (fallback)")}}E.current&&(E.current.value=""),n("handleFileSelect done")},[a.length]);l.useEffect(()=>{const t=E.current;if(!t)return;const s=c=>{n("native file input event fired"),ae(c)};return t.addEventListener("change",s),t.addEventListener("input",s),()=>{t.removeEventListener("change",s),t.removeEventListener("input",s)}},[ae]);const Re=t=>{M(s=>{const c=[...s],x=c.splice(t,1)[0];return x&&(URL.revokeObjectURL(x.preview),x.thumbnail?.preview&&URL.revokeObjectURL(x.thumbnail.preview)),c}),a.length===1&&(L("idle"),te(null)),d>=a.length-1&&d>0&&ce(d-1)},ue=()=>{const s=R.find(x=>x.id===k)?.filter||"none",c=[`brightness(${h.brightness/100})`,`contrast(${h.contrast/100})`,`saturate(${h.saturation/100})`,h.warmth!==0?`sepia(${Math.abs(h.warmth)/200})`:""].filter(Boolean).join(" ");return s==="none"?c||"none":`${s} ${c}`.trim()},Le=(t,s)=>{me(!1);const c=50,x=500;if(Math.abs(s.offset.x)>c||Math.abs(s.velocity.x)>x){const m=R.findIndex(v=>v.id===k);s.offset.x>0||s.velocity.x>x?m>0?(F(R[m-1].id),U.start({x:0,transition:{type:"spring",stiffness:300,damping:30}})):U.start({x:0,transition:{type:"spring",stiffness:500,damping:30}}):(s.offset.x<0||s.velocity.x<-x)&&(m<R.length-1?(F(R[m+1].id),U.start({x:0,transition:{type:"spring",stiffness:300,damping:30}})):U.start({x:0,transition:{type:"spring",stiffness:500,damping:30}}))}else U.start({x:0,transition:{type:"spring",stiffness:500,damping:30}})},Ue=()=>{a.length===0&&!r||y("edit")},$e=()=>y("select"),Pe=async()=>{if(!ee&&!(!f.trim()&&a.length===0)){V(!0),S({message:"Preparing...",percentage:0});try{if(f.trim()&&(await He(f.trim()))?.flagged){alert("Post blocked by moderation."),V(!1),S(null);return}let t,s=[],c,x,D,m,v,W;if(a.length>0){const u=a.length;for(let b=0;b<a.length;b++){const p=a[b],fe=b/u*80;let re=p.file;p.type==="image"&&(S({message:`Compressing ${b+1}/${u}...`,percentage:fe+10}),re=await Ve(re)),S({message:`Uploading ${b+1}/${u}...`,percentage:fe+40});const I=await Be(re,i.telegram_id);if(I.error){alert("Upload failed: "+I.error),V(!1),S(null);return}if(I.url&&(s.push(I.url),b===0&&(t=I.url,c=p.type==="other"?"image":p.type,D=p.metadata?.width,m=p.metadata?.height,v=p.metadata?.duration,W=p.metadata?.sizeBytes)),b===0&&p.type==="video"){let H=p.thumbnail?.file;if(H||(H=await pe(p.file)??void 0),H){const ne=await Ge(H,i.telegram_id);!ne.error&&ne.url&&(x=ne.url)}}}}S({message:"Publishing...",percentage:90});const j=k!=="normal"||h.brightness!==100||h.contrast!==100||h.saturation!==100||h.warmth!==0?JSON.stringify({filter:k,adjustments:h}):void 0,$={content:f.trim(),media_url:t,media_urls:s.length>0?s:void 0,media_type:c,visibility:G?N:"public",is_nsfw:!1,unlock_price:0,media_width:D,media_height:m,media_duration:v,media_size_bytes:W,post_type:"thought",media_filter:j};x&&($.media_thumbnail_url=x),console.log("[CreatePage] Creating post with payload:",JSON.stringify($,null,2));const P=await We(i.telegram_id,$);console.log("[CreatePage] Post result:",JSON.stringify(P,null,2)),P.error?alert(`Failed to create post: ${P.error||"Please try again."}`):(S({message:"Posted!",percentage:100}),setTimeout(()=>{X(""),O(Ne),a.forEach(u=>{URL.revokeObjectURL(u.preview),u.thumbnail?.preview&&URL.revokeObjectURL(u.thumbnail.preview)}),M([]),L("idle"),S(null),F("normal"),C(J),y("select"),window.history.back()},1e3))}catch(t){console.error("Post error:",t),alert("Something went wrong")}finally{V(!1)}}},_e=()=>N==="public"?e.jsx(we,{className:"w-3.5 h-3.5"}):N==="followers"?e.jsx(ve,{className:"w-3.5 h-3.5"}):e.jsx(je,{className:"w-3.5 h-3.5"}),Me=()=>N==="public"?"Everyone":N==="followers"?"My Friends":"Subscribers",xe=a.length>0||r&&f.trim().length>0,Oe=()=>{X(""),a.forEach(t=>{URL.revokeObjectURL(t.preview),t.thumbnail?.preview&&URL.revokeObjectURL(t.thumbnail.preview)}),M([]),L("idle"),F("normal"),C(J),window.history.back()};return e.jsxs("div",{className:"h-full bg-black text-white flex flex-col overflow-hidden",children:[e.jsx(q,{children:B&&e.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-16 h-16 mx-auto mb-4 relative",children:[e.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",children:[e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4",fill:"none"}),e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"white",strokeWidth:"4",fill:"none",strokeDasharray:175.9,strokeDashoffset:175.9-175.9*B.percentage/100,className:"transition-all duration-300"})]}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold",children:[Math.round(B.percentage),"%"]})]}),e.jsx("p",{className:"text-white/60 text-sm",children:B.message})]})})}),e.jsx(q,{children:de&&e.jsxs(_.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-4 left-4 right-4 z-40 bg-red-500/90 backdrop-blur-sm rounded-xl p-4 flex items-start gap-3",children:[e.jsx(Ae,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:de}),e.jsx("button",{onClick:()=>te(null),className:"p-1",children:e.jsx(be,{className:"w-4 h-4"})})]})}),g==="select"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10",children:[e.jsx("button",{onClick:Oe,className:"text-white/60 text-[15px] font-medium",children:"Cancel"}),e.jsx("span",{className:"text-white text-[16px] font-semibold",children:"New post"}),e.jsx("button",{onClick:Ue,disabled:!xe||w==="checking",className:`px-4 py-1.5 rounded-full text-[14px] font-semibold transition-all ${xe&&w!=="checking"?"bg-white text-black":"bg-white/10 text-white/30"}`,children:w==="checking"?e.jsx(z,{className:"w-4 h-4 animate-spin"}):"Next"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-none",children:e.jsxs("div",{className:"px-4 py-4",children:[a.length===0?e.jsxs("div",{className:"w-full aspect-[4/3] rounded-2xl border-2 border-dashed border-white/20 flex flex-col items-center justify-center gap-3 hover:border-white/30 transition-colors active:scale-[0.98] relative",children:[e.jsx("input",{ref:E,type:"file",accept:"image/*",capture:!1,className:"sr-only",onChange:t=>{n("onChange triggered!"),ae(t)},onInput:()=>{n("onInput triggered!")},onClick:t=>{n("File input clicked"),t.target.value=""},disabled:w==="checking"}),e.jsx("button",{type:"button",onClick:()=>{n("Upload button tapped"),E.current?(n("Triggering file input..."),E.current.click()):n("ERROR: fileInputRef is null!")},disabled:w==="checking",className:"absolute inset-0 w-full h-full"}),w==="checking"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center pointer-events-none",children:e.jsx(z,{className:"w-8 h-8 text-white/60 animate-spin"})}),e.jsxs("div",{className:"text-center pointer-events-none",children:[e.jsx("p",{className:"text-white text-[15px] font-medium",children:"Checking content..."}),e.jsx("p",{className:"text-white/40 text-[13px] mt-1",children:"Please wait"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center pointer-events-none",children:e.jsx(qe,{className:"w-8 h-8 text-white/40"})}),e.jsxs("div",{className:"text-center pointer-events-none",children:[e.jsx("p",{className:"text-white text-[15px] font-medium",children:"Add photos or videos"}),e.jsx("p",{className:"text-white/40 text-[13px] mt-1",children:"Tap to select"})]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden bg-white/5",children:[a[d]?.type==="image"?e.jsx("img",{src:a[d].preview,alt:"preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:a[d]?.thumbnail?.preview||a[d]?.preview,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-14 h-14 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center border-2 border-white/20",children:e.jsx(le,{className:"w-6 h-6 text-white ml-0.5",fill:"white"})})})]}),w==="checking"&&e.jsxs("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm flex flex-col items-center justify-center gap-3 z-10",children:[e.jsx(z,{className:"w-10 h-10 text-white animate-spin"}),e.jsx("p",{className:"text-white text-[14px] font-medium",children:"Checking content..."})]}),e.jsx("button",{onClick:()=>Re(d),className:"absolute top-2 right-2 w-7 h-7 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center border border-white/15",children:e.jsx(be,{className:"w-3.5 h-3.5 text-white"})}),a.length>1&&e.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 rounded-full bg-black/60 backdrop-blur-sm text-[11px] font-medium text-white",children:[d+1,"/",a.length]})]}),a.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[a.map((t,s)=>e.jsxs("button",{onClick:()=>ce(s),className:`relative w-14 h-14 rounded-lg overflow-hidden flex-shrink-0 transition-all ${s===d?"ring-2 ring-white":"opacity-60"}`,children:[e.jsx("img",{src:t.type==="video"&&t.thumbnail?.preview||t.preview,alt:"",className:"w-full h-full object-cover"}),t.type==="video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(le,{className:"w-3 h-3 text-white",fill:"white"})})]},s)),a.length<4&&e.jsx("button",{onClick:()=>E.current?.click(),disabled:w==="checking",className:`w-14 h-14 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center flex-shrink-0 transition-colors ${w==="checking"?"opacity-50":"hover:border-white/30"}`,children:w==="checking"?e.jsx(z,{className:"w-5 h-5 text-white/40 animate-spin"}):e.jsx(Je,{className:"w-5 h-5 text-white/40"})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("textarea",{ref:T,value:f,onChange:t=>X(t.target.value.slice(0,2200)),placeholder:"Write a caption...",className:"w-full bg-transparent text-white text-[15px] placeholder-white/40 resize-none focus:outline-none min-h-[80px] leading-relaxed",rows:3}),f.length>2e3&&e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`text-[11px] ${f.length>2100?"text-orange-400":"text-white/30"}`,children:[f.length,"/2200"]})})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:e.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/8 transition-colors",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-white/10 flex items-center justify-center",children:_e()}),e.jsx("span",{className:"text-white text-[13px] font-medium",children:Me()}),e.jsx(ge,{className:"w-4 h-4 text-white/40"})]})})]})})]}),g==="edit"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10",children:[e.jsxs("button",{onClick:$e,className:"flex items-center gap-1 text-white/60",children:[e.jsx(Ke,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[15px] font-medium",children:"Back"})]}),e.jsx("span",{className:"text-white text-[16px] font-semibold",children:"Edit"}),e.jsx("button",{onClick:Pe,disabled:ee,className:"px-4 py-1.5 rounded-full text-[14px] font-semibold bg-white text-black transition-all",children:ee?e.jsx(z,{className:"w-4 h-4 animate-spin"}):"Post"})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"border-b border-white/10 flex-shrink-0",children:e.jsx("div",{ref:ie,className:"flex gap-2 px-3 py-3 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:R.map(t=>e.jsxs("button",{onClick:()=>F(t.id),className:`flex flex-col items-center gap-1.5 flex-shrink-0 transition-all ${k===t.id?"opacity-100":"opacity-50"}`,children:[e.jsx("div",{className:`w-14 h-14 rounded-lg overflow-hidden border-2 transition-colors ${k===t.id?"border-white":"border-transparent"}`,children:a[d]&&e.jsx("img",{src:a[d].type==="video"&&a[d].thumbnail?.preview||a[d].preview,alt:"",className:"w-full h-full object-cover",style:{filter:t.filter}})}),e.jsx("span",{className:`text-[10px] font-medium ${k===t.id?"text-white":"text-white/60"}`,children:t.name})]},t.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-none",children:e.jsxs(_.div,{className:"p-4",drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragStart:()=>me(!0),onDragEnd:Le,animate:U,style:{cursor:Ee?"grabbing":"grab"},children:[e.jsx("div",{className:"relative rounded-2xl overflow-hidden bg-white/5",children:a[d]?.type==="image"?e.jsx("img",{src:a[d].preview,alt:"preview",className:"w-full h-auto object-contain rounded-2xl pointer-events-none",style:{filter:ue()},draggable:!1}):e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a[d]?.thumbnail?.preview||a[d]?.preview,alt:"preview",className:"w-full h-auto rounded-2xl pointer-events-none",style:{filter:ue()},draggable:!1}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center border-2 border-white/20",children:e.jsx(le,{className:"w-7 h-7 text-white ml-1",fill:"white"})})})]})}),e.jsx("p",{className:"text-center text-white/30 text-[11px] mt-3",children:"Swipe left or right to change filter"})]})}),e.jsxs("div",{className:"border-t border-white/10 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>Se(!Q),className:"w-full flex items-center justify-center gap-2 py-2.5 text-white/60 hover:text-white transition-colors",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[13px] font-medium",children:"Manual Adjustments"}),e.jsx(ge,{className:`w-4 h-4 transition-transform duration-200 ${Q?"rotate-180":""}`})]}),e.jsx(q,{children:Q&&e.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden px-4 pb-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Brightness"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[h.brightness,"%"]})]}),e.jsx("input",{type:"range",min:"50",max:"150",value:h.brightness,onChange:t=>C(s=>({...s,brightness:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(at,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Contrast"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[h.contrast,"%"]})]}),e.jsx("input",{type:"range",min:"50",max:"150",value:h.contrast,onChange:t=>C(s=>({...s,contrast:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nt,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Saturation"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[h.saturation,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"200",value:h.saturation,onChange:t=>C(s=>({...s,saturation:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-4 h-4 text-white/50 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-white/50",children:"Warmth"}),e.jsxs("span",{className:"text-[11px] text-white/30",children:[h.warmth>0?"+":"",h.warmth]})]}),e.jsx("input",{type:"range",min:"-50",max:"50",value:h.warmth,onChange:t=>C(s=>({...s,warmth:Number(t.target.value)})),className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]}),e.jsx("button",{onClick:()=>C(J),className:"w-full py-1.5 text-[12px] text-white/30 hover:text-white/50 transition-colors",children:"Reset all"})]})})})]})]})]}),e.jsx("div",{className:"h-4 flex-shrink-0"}),se&&e.jsxs("div",{className:"fixed inset-4 bg-black/95 border border-green-500/50 rounded-2xl overflow-hidden z-[100] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-green-500/30 bg-green-500/10",children:[e.jsx("span",{className:"text-sm text-green-400 font-mono font-bold",children:"ðŸ› DEBUG LOG"}),e.jsx("button",{onClick:()=>he(!1),className:"text-white bg-red-500/80 px-3 py-1 rounded-full text-xs font-bold",children:"CLOSE"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:A.length===0?e.jsx("p",{className:"text-green-400/60 text-sm font-mono",children:"No logs yet - try selecting an image..."}):A.map((t,s)=>e.jsx("p",{className:"text-xs font-mono text-green-300 break-all py-0.5",children:t},s))})]}),e.jsx("button",{onClick:()=>he(!se),className:"fixed top-16 right-2 px-3 py-2 rounded-full bg-green-500 flex items-center justify-center text-xs text-black font-bold z-[100] shadow-lg",children:se?"âœ•":"ðŸ› DEBUG"}),e.jsx(q,{children:ke&&e.jsxs(e.Fragment,{children:[e.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-40",onClick:()=>Z(!1)}),e.jsx(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25,stiffness:400},className:"fixed left-4 right-4 top-1/2 -translate-y-1/2 bg-[#2a2a2c] rounded-2xl z-50 overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-white text-[15px] font-semibold text-center mb-4",children:"Who can see this?"}),e.jsx("div",{className:"space-y-2",children:[{value:"public",icon:we,label:"Everyone",desc:"Visible to all users",creatorOnly:!1},{value:"followers",icon:ve,label:"My Friends",desc:"Only people who follow you",creatorOnly:!1},{value:"subscribers",icon:je,label:"Subscribers Only",desc:"Exclusive content for subscribers",creatorOnly:!0}].filter(t=>!t.creatorOnly||G).map(t=>e.jsxs("button",{onClick:()=>{O(t.value),Z(!1)},className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${N===t.value?"bg-white/15 ring-1 ring-white/20":"bg-white/5 active:bg-white/10"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N===t.value?"bg-white text-black":"bg-white/10 text-white"}`,children:e.jsx(t.icon,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:`text-[14px] font-medium ${N===t.value?"text-white":"text-white/90"}`,children:t.label}),e.jsx("p",{className:"text-white/40 text-[12px]",children:t.desc})]}),N===t.value&&e.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center",children:e.jsx(Ye,{className:"w-4 h-4 text-black"})})]},t.value))})]})})]})})]})}export{Et as default};
