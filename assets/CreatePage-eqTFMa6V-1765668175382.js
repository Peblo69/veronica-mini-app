import{B as Ne,C as me,D as ke,E as _e,c as I,s as Se,r as o,F as Ce,G as Le,H as ae,j as e,A as E,m as g,P as ie,I as Ue,J as Me,K as Re,L as Pe,N as ze}from"./index-FuRYyHv5-1765668175382.js";import{m as Ee,a as Te}from"./moderation-Cyx-wVK9-1765668175382.js";import{T as Fe,S as $e}from"./triangle-alert-DPuzTGNM-1765668175382.js";import{X as re}from"./x-Ciy_jLyC-1765668175382.js";import{A as Ae}from"./arrow-right-4m5kk5k3-1765668175382.js";import{L as le}from"./loader-circle-FMmlhrXg-1765668175382.js";import{P as Ve}from"./play-C3hOK71o-1765668175382.js";import{C as Oe}from"./chevron-left-DaeWP-VT-1765668175382.js";import{G as ne}from"./globe-DPVvQeWu-1765668175382.js";import{U as oe}from"./users-U_E2VvxH-1765668175382.js";import{S as ce}from"./star-CGTvLtRk-1765668175382.js";import{C as de}from"./chevron-down-C5ZXSeG0-1765668175382.js";import{C as Ie}from"./check-CtFDB-K_-1765668175382.js";function Be(a){a.values.forEach(s=>s.stop())}function J(a,s){[...s].reverse().forEach(m=>{const f=a.getVariant(m);f&&me(a,f),a.variantChildren&&a.variantChildren.forEach(h=>{J(h,s)})})}function De(a,s){if(Array.isArray(s))return J(a,s);if(typeof s=="string")return J(a,[s]);me(a,s)}function He(){const a=new Set,s={subscribe(r){return a.add(r),()=>void a.delete(r)},start(r,m){const f=[];return a.forEach(h=>{f.push(Ne(h,r,{transitionOverride:m}))}),Promise.all(f)},set(r){return a.forEach(m=>{De(m,r)})},stop(){a.forEach(r=>{Be(r)})},mount(){return()=>{s.stop()}}};return s}function We(){const a=ke(He);return _e(a.mount,[]),a}const Ge=We;const qe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]],Je=I("contrast",qe);const Ke=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Xe=I("droplets",Ke);const Ye=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Ze=I("sliders-horizontal",Ye);const Qe=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],et=I("thermometer",Qe);async function tt(a,s,r,m,f){try{const{data:h,error:U}=await Se.rpc("create_story",{p_user_id:a,p_media_url:s,p_media_type:r,p_thumbnail_url:m||null,p_duration:f||null});return U?(console.error("[Stories] Create error:",U),null):h}catch(h){return console.error("[Stories] Create exception:",h),null}}const q=[{id:"normal",name:"Normal",filter:"none"},{id:"vivid",name:"Vivid",filter:"saturate(1.3) contrast(1.1)"},{id:"warm",name:"Warm",filter:"sepia(0.2) saturate(1.1) brightness(1.05)"},{id:"cool",name:"Cool",filter:"saturate(0.9) hue-rotate(10deg) brightness(1.05)"},{id:"bw",name:"B&W",filter:"grayscale(1) contrast(1.1)"},{id:"vintage",name:"Vintage",filter:"sepia(0.4) contrast(0.9) brightness(0.95)"},{id:"fade",name:"Fade",filter:"contrast(0.85) brightness(1.1) saturate(0.8)"},{id:"dramatic",name:"Dramatic",filter:"contrast(1.3) saturate(1.2) brightness(0.95)"},{id:"noir",name:"Noir",filter:"grayscale(1) contrast(1.4) brightness(0.9)"}],he={brightness:100,contrast:100,saturation:100,warmth:0};function st(a){return new Promise(s=>{const r=document.createElement("img");r.onload=()=>{s({width:r.naturalWidth,height:r.naturalHeight,sizeBytes:a.size}),URL.revokeObjectURL(r.src)},r.onerror=()=>s({width:0,height:0,sizeBytes:a.size}),r.src=URL.createObjectURL(a)})}function at(a){return new Promise(s=>{const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>{s({width:r.videoWidth,height:r.videoHeight,duration:Math.round(r.duration),sizeBytes:a.size}),URL.revokeObjectURL(r.src)},r.onerror=()=>s({width:0,height:0,sizeBytes:a.size}),r.src=URL.createObjectURL(a)})}function pt({user:a}){const[s,r]=o.useState("post"),[m,f]=o.useState("select"),[h,U]=o.useState(""),[i,j]=o.useState([]),[d,K]=o.useState(0),[v,M]=o.useState("public"),[ue,B]=o.useState("public"),[xe,D]=o.useState(!1),[N,X]=o.useState("normal"),[b,Y]=o.useState(he),[H,fe]=o.useState(!1),[W,T]=o.useState(!1),[F,y]=o.useState(null),[Z,C]=o.useState("idle"),[Q,$]=o.useState(null),A=o.useRef(null),R=o.useRef(null),ee=o.useRef(null);Ge();const V=a.is_creator;o.useEffect(()=>{let t=!0;if(!V){B("public"),M("public");return}return Ce(a.telegram_id).then(l=>{if(!t||!l)return;const n=l.default_post_visibility||"public";B(n),M(n)}).catch(()=>{t&&(B("public"),M("public"))}),()=>{t=!1}},[a.telegram_id,V]),o.useEffect(()=>{R.current&&(R.current.style.height="auto",R.current.style.height=R.current.scrollHeight+"px")},[h]),o.useEffect(()=>{if(ee.current&&m==="edit"){const t=q.findIndex(n=>n.id===N),l=ee.current.children[t];l&&l.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[N,m]);const G=o.useCallback(async t=>{const l=t.target,n=Array.from(l?.files||[]);if(n.length===0)return;l&&(l.value="");const p=(s==="story"?1:5)-i.length;let w=n;if(s==="story"?(j([]),w=n.slice(0,1)):w=n.slice(0,p),!(w.length===0&&s!=="story"))for(const u of w){const x=Le(u);if(x==="unknown")continue;C("checking"),$(null);const k=URL.createObjectURL(u);let _,O;if(x==="image")_=await st(u);else if(x==="video"){_=await at(u);const L=await ae(u);L&&(O={file:L,preview:URL.createObjectURL(L)})}const se={file:u,preview:k,type:x,metadata:_,thumbnail:O};try{{const P=x==="video"&&O?O.file:u,S=await Ee(P);if(S?.flagged){C("rejected");let z="This content violates our community guidelines.";S.categories?.sexual_minors?z="This content has been flagged for safety concerns.":S.categories?.sexual?z=S.reasons?.[0]||"Explicit content not allowed.":S.categories?.violence?z="Graphic violence not allowed.":S.reasons?.length>0&&(z=S.reasons[0]),$(z),URL.revokeObjectURL(k);continue}}C("approved"),j(P=>[...P,se])}catch(L){console.error("[CreatePage] Moderation error:",L),C("approved"),j(P=>[...P,se])}}},[i.length,s]);o.useEffect(()=>{const t=A.current;if(!t)return;const l=n=>G(n);return t.addEventListener("change",l),t.addEventListener("input",l),()=>{t.removeEventListener("change",l),t.removeEventListener("input",l)}},[G]);const be=t=>{j(l=>{const n=[...l],c=n.splice(t,1)[0];return c&&(URL.revokeObjectURL(c.preview),c.thumbnail?.preview&&URL.revokeObjectURL(c.thumbnail.preview)),n}),i.length<=1&&(C("idle"),$(null)),d>=i.length-1&&d>0&&K(d-1)},pe=()=>{const l=q.find(c=>c.id===N)?.filter||"none",n=[`brightness(${b.brightness/100})`,`contrast(${b.contrast/100})`,`saturate(${b.saturation/100})`,b.warmth!==0?`sepia(${Math.abs(b.warmth)/200})`:""].filter(Boolean).join(" ");return l==="none"?n||"none":`${l} ${n}`.trim()},we=()=>{i.length!==0&&f("edit")},ge=()=>f("select"),ve=async()=>{if(!W&&!(s==="post"&&!h.trim()&&i.length===0)&&!(s==="story"&&i.length===0)){T(!0),y({message:"Preparing...",percentage:0});try{if(s==="post"&&h.trim()&&(await Te(h.trim()))?.flagged){alert("Post blocked by moderation."),T(!1),y(null);return}let t=[],l;const n=i.length;for(let c=0;c<i.length;c++){const p=i[c],w=c/n*80;let u=p.file;p.type==="image"&&(y({message:`Compressing ${c+1}/${n}...`,percentage:w+10}),u=await Ue(u)),y({message:`Uploading ${c+1}/${n}...`,percentage:w+40});let x;if(s==="story"?x=await Me(u,a.telegram_id):x=await Re(u,a.telegram_id),x.error){alert("Upload failed: "+x.error),T(!1),y(null);return}if(x.url&&t.push(x.url),c===0&&p.type==="video"){let k=p.thumbnail?.file;if(k||(k=await ae(p.file)??void 0),k){const _=await Pe(k,a.telegram_id);!_.error&&_.url&&(l=_.url)}}}if(y({message:"Publishing...",percentage:90}),s==="story"){const c=i[0];if(!await tt(a.telegram_id,t[0],c.type,l,c.metadata?.duration))throw new Error("Failed to create story")}else{const c=N!=="normal"||b.brightness!==100||b.contrast!==100||b.saturation!==100||b.warmth!==0?JSON.stringify({filter:N,adjustments:b}):void 0,p={content:h.trim(),media_url:t[0],media_urls:t.length>0?t:void 0,media_type:i[0]?.type==="other"?"image":i[0]?.type,visibility:V?v:"public",is_nsfw:!1,unlock_price:0,media_width:i[0]?.metadata?.width,media_height:i[0]?.metadata?.height,media_duration:i[0]?.metadata?.duration,media_size_bytes:i[0]?.metadata?.sizeBytes,post_type:"thought",media_filter:c};l&&(p.media_thumbnail_url=l);const w=await ze(a.telegram_id,p);if(w.error)throw new Error(w.error.message)}y({message:s==="story"?"Story Added!":"Posted!",percentage:100}),setTimeout(()=>{te(),window.history.back()},1e3)}catch(t){console.error("Post error:",t),alert(t.message||"Something went wrong"),T(!1),y(null)}}},te=()=>{U(""),M(ue),i.forEach(t=>{URL.revokeObjectURL(t.preview),t.thumbnail?.preview&&URL.revokeObjectURL(t.thumbnail.preview)}),j([]),C("idle"),y(null),X("normal"),Y(he),f("select")},ye=()=>{te(),window.history.back()},je=i.length>0;return e.jsxs("div",{className:"fixed inset-0 bg-black text-white flex flex-col font-sans z-[50]",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[60%] h-[60%] bg-blue-500/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[60%] h-[60%] bg-purple-500/10 rounded-full blur-[120px]"})]}),e.jsx(E,{children:F&&e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center backdrop-blur-xl",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90 drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]",children:[e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"rgba(255,255,255,0.1)",strokeWidth:"6",fill:"none"}),e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"white",strokeWidth:"6",fill:"none",strokeDasharray:251.2,strokeDashoffset:251.2-251.2*F.percentage/100,className:"transition-all duration-300 ease-out",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xl font-bold tracking-tight",children:[Math.round(F.percentage),"%"]})})]}),e.jsx("p",{className:"text-white/70 text-base font-medium tracking-wide",children:F.message})]})}),e.jsx(E,{children:Q&&e.jsx(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute inset-0 z-[90] flex items-center justify-center px-6 bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-[#1c1c1e] rounded-3xl p-6 max-w-sm w-full border border-white/10 shadow-2xl",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-red-500/20 flex items-center justify-center mb-4 mx-auto",children:e.jsx(Fe,{className:"w-7 h-7 text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-center mb-2",children:"Review Failed"}),e.jsx("p",{className:"text-white/60 text-center text-sm mb-6 leading-relaxed",children:Q}),e.jsx("button",{onClick:()=>$(null),className:"w-full py-3.5 bg-white text-black font-semibold rounded-xl active:scale-95 transition-transform",children:"Understood"})]})})}),m==="select"&&e.jsxs(g.div,{className:"flex-1 flex flex-col relative z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-4 pt-[calc(env(safe-area-inset-top)+16px)] z-20",children:[e.jsx("button",{onClick:ye,className:"w-10 h-10 rounded-full bg-black/40 backdrop-blur-md border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(re,{className:"w-5 h-5 text-white"})}),je&&e.jsxs("button",{onClick:we,className:"px-6 py-2.5 bg-white text-black rounded-full font-semibold text-sm shadow-[0_0_20px_rgba(255,255,255,0.3)] active:scale-95 transition-transform flex items-center gap-2",children:[e.jsx("span",{children:"Next"}),e.jsx(Ae,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center px-6 overflow-hidden",children:[e.jsx("input",{ref:A,type:"file",accept:"image/*,video/*",multiple:s==="post",className:"hidden",onChange:G,onClick:t=>{t.target.value=""},disabled:Z==="checking"}),i.length===0?e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>A.current?.click(),className:"group relative w-full aspect-[4/5] max-h-[60vh] rounded-[32px] border-2 border-dashed border-white/10 bg-white/5 flex flex-col items-center justify-center overflow-hidden transition-colors hover:border-white/20 hover:bg-white/[0.07]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),Z==="checking"?e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(le,{className:"w-12 h-12 text-white/70 animate-spin"}),e.jsx("p",{className:"text-white/50 text-sm font-medium tracking-wide",children:"Processing media..."})]}):e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-white/10 flex items-center justify-center backdrop-blur-sm shadow-inner border border-white/10 group-hover:scale-110 transition-transform duration-300",children:e.jsx(ie,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-xl font-bold text-white tracking-tight",children:"Select Media"}),e.jsxs("p",{className:"text-white/40 text-sm",children:["Photos or Videos for your ",s==="story"?"Story":"Post"]})]})]})]}):e.jsxs("div",{className:"w-full aspect-[4/5] max-h-[60vh] relative",children:[e.jsx(E,{mode:"wait",children:e.jsxs(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"w-full h-full rounded-[32px] overflow-hidden bg-black relative border border-white/10 shadow-2xl",children:[i[d].type==="video"?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:i[d].thumbnail?.preview||i[d].preview,alt:"video thumbnail",className:"w-full h-full object-cover opacity-80"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/30",children:e.jsx(Ve,{className:"w-8 h-8 text-white ml-1",fill:"currentColor"})})})]}):e.jsx("img",{src:i[d].preview,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),be(d)},className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-black/60 backdrop-blur-md flex items-center justify-center border border-white/10 hover:bg-red-500/80 transition-colors",children:e.jsx(re,{className:"w-4 h-4 text-white"})}),i.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-3 py-1 bg-black/60 backdrop-blur-md rounded-full border border-white/10",children:e.jsxs("span",{className:"text-xs font-medium text-white/90",children:[d+1," / ",i.length]})})]},d)}),i.length>1&&e.jsxs("div",{className:"absolute -bottom-20 left-0 right-0 h-16 flex gap-2 justify-center overflow-x-auto px-4 scrollbar-hide",children:[i.map((t,l)=>e.jsx("button",{onClick:()=>K(l),className:`relative w-12 h-12 rounded-xl overflow-hidden flex-shrink-0 transition-all duration-200 border-2 ${l===d?"border-white scale-110 shadow-lg":"border-transparent opacity-50 grayscale"}`,children:e.jsx("img",{src:t.type==="video"&&t.thumbnail?.preview||t.preview,className:"w-full h-full object-cover",alt:""})},l)),i.length<5&&s==="post"&&e.jsx("button",{onClick:()=>A.current?.click(),className:"w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(ie,{className:"w-5 h-5 text-white/50"})})]})]})]}),e.jsx("div",{className:"pb-[calc(env(safe-area-inset-bottom)+24px)] pt-8 flex-shrink-0",children:e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsx("button",{onClick:()=>{r("post"),j([])},className:`text-sm font-bold tracking-widest transition-all duration-300 ${s==="post"?"text-white scale-110 drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]":"text-white/30 hover:text-white/50"}`,children:"POST"}),e.jsx("div",{className:"w-px h-4 bg-white/10"}),e.jsx("button",{onClick:()=>{r("story"),j([])},className:`text-sm font-bold tracking-widest transition-all duration-300 ${s==="story"?"text-white scale-110 drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]":"text-white/30 hover:text-white/50"}`,children:"STORY"})]})})]}),m==="edit"&&e.jsxs(g.div,{className:"flex-1 flex flex-col h-full relative z-10",initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{type:"spring",damping:25,stiffness:300},children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-4 pt-[calc(env(safe-area-inset-top)+16px)] flex-shrink-0 z-30",children:[e.jsx("button",{onClick:ge,className:"w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center hover:bg-white/10 transition-colors border border-white/10",children:e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:ve,disabled:W,className:"px-6 py-2 bg-white text-black rounded-full font-bold text-sm shadow-lg active:scale-95 transition-transform disabled:opacity-50 disabled:scale-100 flex items-center gap-2",children:W?e.jsx(le,{className:"w-4 h-4 animate-spin"}):s==="story"?"Share Story":"Share Post"})]}),e.jsxs("div",{className:"flex-1 relative flex items-center justify-center p-4 overflow-hidden",children:[e.jsx(g.div,{className:"relative w-full h-full max-h-[60vh] rounded-[24px] overflow-hidden shadow-2xl border border-white/10 bg-[#1c1c1e]",style:{filter:pe()},children:i[d]?.type==="video"?e.jsx("img",{src:i[d].thumbnail?.preview||i[d].preview,className:"w-full h-full object-contain",alt:""}):e.jsx("img",{src:i[d].preview,className:"w-full h-full object-contain",alt:""})}),s==="post"&&e.jsx("div",{className:"absolute bottom-8 left-8 right-8 z-20",children:e.jsxs("div",{className:"bg-black/60 backdrop-blur-xl rounded-2xl border border-white/10 p-4 shadow-xl",children:[e.jsx("textarea",{ref:R,value:h,onChange:t=>U(t.target.value.slice(0,2200)),placeholder:"Write a caption...",className:"w-full bg-transparent text-white text-[15px] placeholder-white/40 resize-none focus:outline-none min-h-[40px] max-h-[120px]",rows:1}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/10",children:[e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[v==="public"&&e.jsx(ne,{className:"w-3.5 h-3.5 text-white/60"}),v==="followers"&&e.jsx(oe,{className:"w-3.5 h-3.5 text-white/60"}),v==="subscribers"&&e.jsx(ce,{className:"w-3.5 h-3.5 text-white/60"}),e.jsx("span",{className:"text-xs text-white/80 font-medium capitalize",children:v}),e.jsx(de,{className:"w-3 h-3 text-white/40"})]}),e.jsxs("span",{className:"text-[10px] text-white/30",children:[h.length,"/2200"]})]})]})})]}),e.jsxs("div",{className:"flex-shrink-0 bg-black/80 backdrop-blur-xl border-t border-white/10 pb-[env(safe-area-inset-bottom)] z-30",children:[e.jsxs("button",{onClick:()=>fe(!H),className:"w-full flex items-center justify-center gap-2 py-3 text-xs font-medium text-white/60 hover:text-white border-b border-white/5",children:[e.jsx(Ze,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Adjustments"}),e.jsx(de,{className:`w-3.5 h-3.5 transition-transform ${H?"rotate-180":""}`})]}),e.jsx(E,{children:H&&e.jsx(g.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden bg-black/20",children:e.jsx("div",{className:"px-6 py-6 space-y-5",children:[{label:"Brightness",icon:$e,key:"brightness",min:50,max:150},{label:"Contrast",icon:Je,key:"contrast",min:50,max:150},{label:"Saturation",icon:Xe,key:"saturation",min:0,max:200},{label:"Warmth",icon:et,key:"warmth",min:-50,max:50}].map(t=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t.icon,{className:"w-4 h-4 text-white/50"}),e.jsx("input",{type:"range",min:t.min,max:t.max,value:b[t.key],onChange:l=>Y(n=>({...n,[t.key]:Number(l.target.value)})),className:"flex-1 h-1 bg-white/20 rounded-full appearance-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]},t.key))})})}),e.jsx("div",{className:"flex gap-3 overflow-x-auto px-6 py-5 scrollbar-hide",children:q.map(t=>e.jsxs("button",{onClick:()=>X(t.id),className:"flex flex-col items-center gap-2 flex-shrink-0 group",children:[e.jsx("div",{className:`w-16 h-16 rounded-full overflow-hidden border-2 transition-all ${N===t.id?"border-white scale-110":"border-transparent opacity-60 group-hover:opacity-100"}`,children:e.jsx("img",{src:i[d].preview,className:"w-full h-full object-cover",style:{filter:t.filter},alt:t.name})}),e.jsx("span",{className:`text-[10px] font-medium tracking-wide ${N===t.id?"text-white":"text-white/40"}`,children:t.name})]},t.id))})]})]}),e.jsx(E,{children:xe&&e.jsxs(e.Fragment,{children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-[60] bg-black/80 backdrop-blur-sm",onClick:()=>D(!1)}),e.jsx(g.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"absolute bottom-0 left-0 right-0 z-[61] bg-[#1c1c1e] rounded-t-[32px] overflow-hidden border-t border-white/10",children:e.jsxs("div",{className:"p-6 pb-10",children:[e.jsx("div",{className:"w-12 h-1 bg-white/10 rounded-full mx-auto mb-6"}),e.jsx("h3",{className:"text-lg font-bold text-white text-center mb-6",children:"Who can see this post?"}),e.jsx("div",{className:"space-y-2",children:[{value:"public",label:"Everyone",icon:ne,sub:"Visible to everyone on Veronica"},{value:"followers",label:"Followers Only",icon:oe,sub:"Only people who follow you"},{value:"subscribers",label:"Subscribers Only",icon:ce,sub:"Exclusive content for paid subscribers"}].filter(t=>!(t.value==="subscribers"&&!V)).map(t=>e.jsxs("button",{onClick:()=>{M(t.value),D(!1)},className:`w-full flex items-center gap-4 p-4 rounded-2xl transition-all ${v===t.value?"bg-white text-black":"bg-white/5 text-white hover:bg-white/10"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${v===t.value?"bg-black/10":"bg-white/10"}`,children:e.jsx(t.icon,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-[15px]",children:t.label}),e.jsx("p",{className:`text-[13px] ${v===t.value?"text-black/60":"text-white/40"}`,children:t.sub})]}),v===t.value&&e.jsx(Ie,{className:"w-5 h-5"})]},t.value))})]})})]})})]})}export{pt as default};
