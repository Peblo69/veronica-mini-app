import{r as l,a4 as Ee,a5 as Le,a6 as Re,a3 as De,j as e,m as n,A as P,ac as Ie,t as c,ad as Ve,a as Ae,x as le}from"./index-B2HmjE7V-1765650078665.js";import{r as Be,G as ze,S as Ge,F as Oe,u as He,h as Qe}from"./analyticsApi--bJmctjN-1765650078665.js";import{P as We,u as Xe,s as qe}from"./PostDetail-sY6SSb4t-1765650078665.js";import{C as T,u as Ke}from"./useInViewport-2erDMRcE-1765650078665.js";import{A as Je}from"./arrow-left-Dt5RV_RK-1765650078665.js";import{S as p}from"./star-uJvkY8ha-1765650078665.js";import{E as Ye}from"./CommentsSheet-CIw_ECz1-1765650078665.js";import{C as Ze}from"./crown-DH5o_b0u-1765650078665.js";import{G as ae}from"./gift-DMk89CXY-1765650078665.js";import{L as V}from"./lock-D6rseMs0-1765650078665.js";import{R as ie}from"./repeat-2-Ce0zNdkk-1765650078665.js";import{H as Ue}from"./heart-DpLijsUw-1765650078665.js";import{V as es}from"./video-BlSOK6vP-1765650078665.js";import{X as re}from"./x-DQjpzRPk-1765650078665.js";import{C as ss}from"./copy-B5cdfPaV-1765650078665.js";import{B as ts}from"./ban-BblOqOyS-1765650078665.js";import{F as ls}from"./flag-liIYadSQ-1765650078665.js";import{I as as}from"./image-yrgCQdr6-1765650078665.js";import{P as is}from"./play-DJFLEKvT-1765650078665.js";import"./PixelIcons-Dn4Q76Bd-1765650078665.js";import"./useTranslation-BX4XJ5-q-1765650078665.js";import"./trash-2-XfI9h3EU-1765650078665.js";import"./loader-circle-CImFR80n-1765650078665.js";import"./volume-2-Dff0aXdM-1765650078665.js";function A(t){return t>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+"M":t>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+"K":t.toString()}function Es({creator:t,currentUser:i,onBack:y,onMessage:k,onUserUpdate:m,onViewProfile:B}){const[o,x]=l.useState("posts"),[u,h]=l.useState([]),[_,$]=l.useState(!0),[f,w]=l.useState(null),[M,oe]=l.useState(!1),[ce,b]=l.useState(t.followers_count||0),[de,me]=l.useState(t.following_count||0),[v,E]=l.useState(null),[L,z]=l.useState(null),[R,G]=l.useState(!1),[O,X]=l.useState(!1),[D,q]=l.useState(!1),[xe,C]=l.useState(!1),[g,H]=l.useState(50),[K,J]=l.useState(""),[I,Q]=l.useState(!1),[ue,W]=l.useState(!1),[he,Y]=l.useState("followers"),[fe,S]=l.useState(!1),[Z]=l.useState(!1),[os,be]=l.useState(t.subscribers_count||0),[pe,we]=l.useState(0),[ge,j]=l.useState(!1);l.useEffect(()=>{je(),Be(t.telegram_id,i.telegram_id,"profile")},[t.telegram_id,i.telegram_id]),l.useEffect(()=>{const s=Ee(t.telegram_id,{onNewFollower:r=>{r!==i.telegram_id&&b(d=>d+1)},onUnfollow:r=>{r!==i.telegram_id&&b(d=>Math.max(0,d-1))}}),a=Le(t.telegram_id,r=>{b(r.followers_count||0),be(r.subscribers_count||0)});return()=>{s(),a()}},[t.telegram_id,i.telegram_id]);const je=async()=>{$(!0);const[s,a]=await Promise.all([Re(t.telegram_id,i.telegram_id),De(t.telegram_id)]);h(s.posts),w(s.relationship.is_following),oe(s.relationship.is_subscribed),b(a.followers),me(a.following);const r=s.posts.reduce((d,N)=>d+(N.likes_count||0),0);we(r),$(!1)},Ne=async()=>{if(!D){q(!0);try{f?(w(!1),b(a=>Math.max(0,a-1)),m&&m({following_count:Math.max(0,(i.following_count||0)-1)}),await Ie(i.telegram_id,t.telegram_id)||(w(!0),b(a=>a+1),m&&m({following_count:i.following_count||0}),c.error("Failed to unfollow"))):(w(!0),b(a=>a+1),m&&m({following_count:(i.following_count||0)+1}),await Ve(i.telegram_id,t.telegram_id)||(w(!1),b(a=>Math.max(0,a-1)),m&&m({following_count:Math.max(0,i.following_count||0)}),c.error("Failed to follow")))}finally{q(!1)}}},ye=async()=>{S(!1),c.info("Subscription with Stars coming soon!")},ve=async s=>{G(!0),await Xe(i.telegram_id,s.id,async()=>{try{const a={id:s.id,unlock_price:s.unlock_price,is_purchased:!0,creator_id:s.creator_id};let r=s.media_url,d=s.media_urls;s.media_url&&(r=await le(s.media_url,a,i.telegram_id)),s.media_urls&&s.media_urls.length>0&&(d=await Promise.all(s.media_urls.map(N=>le(N,a,i.telegram_id)))),h(u.map(N=>N.id===s.id?{...N,can_view:!0,is_purchased:!0,media_url:r,media_urls:d}:N))}catch(a){console.error("Failed to fetch signed URL after purchase:",a),h(u.map(r=>r.id===s.id?{...r,can_view:!0,is_purchased:!0}:r))}E(null),G(!1),c.success("Content unlocked!")},a=>{G(!1),c.error(a||"Purchase failed")})},ke=async()=>{if(g<1){c.error("Minimum tip is 1 Star");return}Q(!0),await qe(i.telegram_id,t.telegram_id,g,K||void 0,void 0,()=>{C(!1),H(50),J(""),Q(!1),c.success(`Sent ${g} Stars!`)},s=>{Q(!1),c.error(s||"Tip failed")})},_e=async()=>{if(!(!k||O)){X(!0);try{const s=await Ae(i.telegram_id,t.telegram_id,i.telegram_id);s?k(s.id):c.error("Could not start conversation")}catch{c.error("Failed to start chat")}finally{X(!1)}}},Ce=async()=>{j(!1);const s=t.first_name||t.username||"User",r=`Check out @${t.username||`user_${t.telegram_id}`} on Veronica!`,d=window.Telegram?.WebApp;d?.switchInlineQuery?d.switchInlineQuery(r,["users","groups","channels"]):navigator.share?await navigator.share({title:s,text:r}):(await navigator.clipboard.writeText(r),c.success("Profile link copied!"))},Se=async()=>{j(!1);const a=`@${t.username||`user_${t.telegram_id}`} on Veronica`;await navigator.clipboard.writeText(a),c.success("Copied to clipboard!")},Fe=()=>{j(!1),c.info("Block feature coming soon")},Pe=()=>{j(!1),c.info("Report feature coming soon")},U=s=>{s.can_view?z(s):s.visibility==="subscribers"&&!M?S(!0):s.unlock_price>0?E(s):S(!0)},Te=()=>{L&&(h(u.filter(s=>s.id!==L.id)),z(null))},$e=s=>{h(u.map(a=>a.id===s.id?{...s,can_view:a.can_view}:a))},ee=u.filter(s=>s.visibility==="public"),se=u.filter(s=>s.visibility!=="public"),[Me,te]=l.useState(!0),F=l.useRef(null);return l.useEffect(()=>{const s=document.querySelector("main");if(!s)return;const a=()=>{te(!1),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>te(!0),150)};return s.addEventListener("scroll",a,{passive:!0}),()=>{s.removeEventListener("scroll",a),F.current&&clearTimeout(F.current)}},[]),e.jsxs("div",{className:"bg-black min-h-screen text-white pb-20",children:[e.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 transition-opacity duration-200 ${Me?"opacity-100":"opacity-0 pointer-events-none"}`,style:{paddingTop:"max(50px, env(safe-area-inset-top, 0px))"},children:e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsx("button",{onClick:y,className:"p-2 rounded-full bg-black/30 backdrop-blur-sm active:bg-white/10 transition-colors",children:e.jsx(Je,{className:"w-5 h-5 text-white drop-shadow-lg"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-2 rounded-full bg-black/30 backdrop-blur-sm active:bg-white/10 transition-colors",onClick:()=>C(!0),children:e.jsx(p,{className:"w-5 h-5 text-white drop-shadow-lg"})}),e.jsx("button",{className:"p-2 rounded-full bg-black/30 backdrop-blur-sm active:bg-white/10 transition-colors",onClick:()=>j(!0),children:e.jsx(Ye,{className:"w-5 h-5 text-white drop-shadow-lg"})})]})]})}),e.jsx("div",{style:{height:"calc(max(50px, env(safe-area-inset-top, 0px)) + 50px)"}}),e.jsxs("div",{className:"flex flex-col items-center px-4 pt-1 pb-3",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:"w-18 h-18 rounded-full p-[2px] bg-gradient-to-tr from-pink-500 via-red-500 to-yellow-500",style:{width:"72px",height:"72px"},children:e.jsx("div",{className:"w-full h-full rounded-full p-[2px] bg-black",children:e.jsx("img",{src:t.avatar_url||`https://i.pravatar.cc/150?u=${t.telegram_id}`,alt:t.first_name,className:"w-full h-full rounded-full object-cover"})})}),t.is_verified&&e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2",children:e.jsx(T,{className:"w-5 h-5 text-blue-400 fill-blue-400 bg-black rounded-full"})})]}),e.jsx("div",{className:"w-full flex justify-center mb-0.5",children:e.jsx("span",{className:"text-base font-bold tracking-wide",children:t.first_name?.toUpperCase()||"USER"})}),e.jsxs("span",{className:"text-[12px] text-white/50 mb-3",children:["@",t.username||`user${t.telegram_id}`]}),e.jsxs("div",{className:"flex items-center justify-center gap-0 mb-3",children:[e.jsxs("button",{onClick:()=>{Y("following"),W(!0)},className:"flex flex-col items-center px-4",children:[e.jsx("span",{className:"text-base font-bold",children:A(de)}),e.jsx("span",{className:"text-[11px] text-white/50",children:"Following"})]}),e.jsx("div",{className:"w-[1px] h-6 bg-white/10"}),e.jsxs("button",{onClick:()=>{Y("followers"),W(!0)},className:"flex flex-col items-center px-4",children:[e.jsx("span",{className:"text-base font-bold",children:A(ce)}),e.jsx("span",{className:"text-[11px] text-white/50",children:"Followers"})]}),e.jsx("div",{className:"w-[1px] h-6 bg-white/10"}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[e.jsx("span",{className:"text-base font-bold",children:A(pe)}),e.jsx("span",{className:"text-[11px] text-white/50",children:"Likes"})]})]}),e.jsx("div",{className:"text-center px-6 mb-4",children:e.jsx("p",{className:"text-[13px] text-white/90 whitespace-pre-wrap",children:t.bio||"No bio yet"})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 w-full px-4",children:[e.jsx(n.button,{whileTap:{scale:.95},className:`flex-1 max-w-[140px] py-2.5 rounded-md font-semibold text-sm transition-all ${f===null||D?"bg-white/10 text-white/50":f?"bg-white/10 text-white border border-white/20":"bg-[#FE2C55] text-white"}`,onClick:Ne,disabled:f===null||D,children:f===null||D?e.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):f?"Following":"Follow"}),e.jsx(n.button,{whileTap:{scale:.95},className:"flex-1 max-w-[140px] py-2.5 bg-white/10 rounded-md font-semibold text-sm border border-white/20",onClick:_e,disabled:O,children:O?e.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Message"}),t.is_creator&&e.jsx(n.button,{whileTap:{scale:.95},className:`w-10 h-10 rounded-md flex items-center justify-center ${M?"bg-[#00D4FF]/20 border border-[#00D4FF]/50":"bg-white/10 border border-white/20"}`,onClick:()=>!M&&S(!0),children:M?e.jsx(T,{className:"w-5 h-5 text-[#00D4FF]"}):e.jsx(Ze,{className:"w-5 h-5 text-yellow-400"})}),e.jsx(n.button,{whileTap:{scale:.95},className:"w-10 h-10 bg-white/10 rounded-md flex items-center justify-center border border-white/20",onClick:()=>C(!0),children:e.jsx(ae,{className:"w-5 h-5 text-white"})})]})]}),e.jsxs("div",{className:"flex border-b border-white/10",children:[e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center ${o==="posts"?"border-b-2 border-white":""}`,onClick:()=>x("posts"),children:e.jsx(ze,{className:`w-5 h-5 ${o==="posts"?"text-white":"text-white/40"}`})}),t.is_creator&&e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center ${o==="locked"?"border-b-2 border-white":""}`,onClick:()=>x("locked"),children:e.jsx(V,{className:`w-5 h-5 ${o==="locked"?"text-white":"text-white/40"}`})}),e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center ${o==="reposts"?"border-b-2 border-white":""}`,onClick:()=>x("reposts"),children:e.jsx(ie,{className:`w-5 h-5 ${o==="reposts"?"text-white":"text-white/40"}`})}),e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center ${o==="liked"?"border-b-2 border-white":""}`,onClick:()=>x("liked"),children:e.jsx(Ue,{className:`w-5 h-5 ${o==="liked"?"text-white":"text-white/40"}`})})]}),e.jsxs("div",{className:"pb-20",children:[o==="posts"&&(_?e.jsx("div",{className:"grid grid-cols-3 gap-[1px]",children:[1,2,3,4,5,6].map(s=>e.jsx("div",{className:"aspect-[3/4] bg-white/5 animate-pulse"},s))}):ee.length===0?e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border border-white/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(es,{className:"w-8 h-8 text-white/30"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-sm text-white/50",children:"Posts will appear here"})]}):e.jsx("div",{className:"grid grid-cols-3 gap-[1px]",children:ee.map(s=>e.jsx(n.div,{className:"relative aspect-[3/4] cursor-pointer overflow-hidden bg-[#1a1a1a]",whileTap:{opacity:.9},onClick:()=>U(s),children:e.jsx(ne,{post:s})},s.id))})),o==="locked"&&t.is_creator&&(_?e.jsx("div",{className:"grid grid-cols-3 gap-[1px]",children:[1,2,3].map(s=>e.jsx("div",{className:"aspect-[3/4] bg-white/5 animate-pulse"},s))}):se.length===0?e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border border-white/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"w-8 h-8 text-white/30"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No exclusive content"}),e.jsx("p",{className:"text-sm text-white/50",children:"Subscriber-only content will appear here"})]}):e.jsx("div",{className:"grid grid-cols-3 gap-[1px]",children:se.map(s=>e.jsxs(n.div,{className:"relative aspect-[3/4] cursor-pointer overflow-hidden bg-[#1a1a1a]",whileTap:{opacity:.9},onClick:()=>U(s),children:[e.jsx(ne,{post:s,showLock:!s.can_view}),!s.can_view&&s.unlock_price>0&&e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/60 px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-xs font-semibold",children:s.unlock_price})]})]},s.id))})),o==="reposts"&&e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border border-white/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{className:"w-8 h-8 text-white/30"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No reposts"}),e.jsx("p",{className:"text-sm text-white/50",children:"Reposted content will appear here"})]}),o==="liked"&&e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border border-white/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"w-8 h-8 text-white/30"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Liked videos are private"}),e.jsx("p",{className:"text-sm text-white/50",children:"Only this user can see their liked videos"})]})]}),e.jsx(P,{children:fe&&e.jsx(n.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>S(!1),children:e.jsx(n.div,{className:"bg-[#1c1c1e] rounded-[2rem] w-full max-w-sm p-6 shadow-2xl border border-white/10",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-full p-1 border-2 border-[#00D4FF] mb-4",children:e.jsx("img",{src:t.avatar_url||`https://i.pravatar.cc/150?u=${t.telegram_id}`,alt:t.first_name,className:"w-full h-full rounded-full object-cover"})}),e.jsxs("h3",{className:"text-xl font-bold mb-1",children:["Subscribe to ",t.first_name]}),e.jsx("p",{className:"text-white/50 text-sm mb-6",children:"Unlock exclusive content"}),e.jsxs("div",{className:"space-y-3 mb-6 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[e.jsx(T,{className:"w-5 h-5 text-[#00D4FF] shrink-0"}),e.jsx("span",{children:"Full access to exclusive content"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[e.jsx(T,{className:"w-5 h-5 text-[#00D4FF] shrink-0"}),e.jsx("span",{children:"Direct messaging priority"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[e.jsx(T,{className:"w-5 h-5 text-[#00D4FF] shrink-0"}),e.jsx("span",{children:"Support the creator directly"})]})]}),e.jsx(n.button,{className:"w-full py-4 rounded-2xl font-bold flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black",whileTap:{scale:.98},onClick:ye,disabled:Z,children:Z?e.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5 fill-current"}),"Subscribe for ",t.subscription_price||0," Stars/month"]})})]})})})}),e.jsx(P,{children:v&&!v.can_view&&v.unlock_price>0&&e.jsx(n.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>!R&&E(null),children:e.jsxs(n.div,{className:"bg-[#1c1c1e] rounded-[2rem] w-full max-w-sm p-6 shadow-2xl border border-white/10",initial:{scale:.9,y:30},animate:{scale:1,y:0},exit:{scale:.9,y:30},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Unlock Content"}),e.jsx("button",{onClick:()=>!R&&E(null),className:"p-1 hover:bg-white/10 rounded-full",children:e.jsx(re,{className:"w-6 h-6 text-gray-400"})})]}),e.jsxs("div",{className:"text-center mb-8 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-500/20 blur-3xl rounded-full"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(p,{className:"w-10 h-10 text-white fill-white"})}),e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Pay with Telegram Stars"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(p,{className:"w-6 h-6 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-4xl font-bold",children:Math.ceil(v.unlock_price)})]})]}),e.jsx("div",{className:"bg-white/5 rounded-2xl p-4 mb-6 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.avatar_url||`https://i.pravatar.cc/150?u=${t.telegram_id}`,className:"w-10 h-10 rounded-full object-cover",alt:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:t.first_name||t.username}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Creator receives 85%"})]})]})}),e.jsx(n.button,{className:"w-full py-4 rounded-2xl font-bold flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black",whileTap:{scale:.98},onClick:()=>ve(v),disabled:R,children:R?e.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5 fill-current"}),"Pay ",Math.ceil(v.unlock_price)," Stars"]})})]})})}),e.jsx(P,{children:xe&&e.jsx(n.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>!I&&C(!1),children:e.jsxs(n.div,{className:"bg-[#1c1c1e] rounded-[2rem] w-full max-w-sm p-6 shadow-2xl border border-white/10",initial:{scale:.9,y:30},animate:{scale:1,y:0},exit:{scale:.9,y:30},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Send a Tip"}),e.jsx("button",{onClick:()=>!I&&C(!1),className:"p-1 hover:bg-white/10 rounded-full",children:e.jsx(re,{className:"w-6 h-6 text-gray-400"})})]}),e.jsxs("div",{className:"text-center mb-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-500/20 blur-3xl rounded-full"}),e.jsx("div",{className:"relative w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(ae,{className:"w-8 h-8 text-white"})}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Show support to ",t.first_name]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[10,50,100,250].map(s=>e.jsx("button",{className:`py-2 rounded-xl text-sm font-semibold transition-all ${g===s?"bg-gradient-to-r from-yellow-400 to-orange-500 text-black":"bg-white/10 text-white hover:bg-white/20"}`,onClick:()=>H(s),children:s},s))}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-yellow-400 fill-yellow-400"}),e.jsx("input",{type:"number",value:g,onChange:s=>H(Math.max(1,parseInt(s.target.value)||1)),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:outline-none focus:border-yellow-400",placeholder:"Enter amount",min:"1"})]}),e.jsx("input",{type:"text",value:K,onChange:s=>J(s.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:outline-none focus:border-yellow-400 mb-6",placeholder:"Add a message (optional)",maxLength:100}),e.jsx(n.button,{className:"w-full py-4 rounded-2xl font-bold flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black",whileTap:{scale:.98},onClick:ke,disabled:I||g<1,children:I?e.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5 fill-current"}),"Send ",g," Stars"]})}),e.jsx("p",{className:"text-center text-gray-500 text-xs mt-4",children:"Creator receives 85% of your tip"})]})})}),e.jsx(P,{children:ge&&e.jsx(n.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>j(!1),children:e.jsxs(n.div,{className:"absolute bottom-0 left-0 right-0 bg-[#1c1c1e] rounded-t-3xl overflow-hidden",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-10 h-1 bg-white/20 rounded-full"})}),e.jsxs("div",{className:"px-4 pb-8",children:[e.jsxs("button",{onClick:Ce,className:"w-full flex items-center gap-4 py-4 border-b border-white/10",children:[e.jsx(Ge,{className:"w-5 h-5 text-white/70"}),e.jsx("span",{className:"text-white text-[15px]",children:"Share Profile"})]}),e.jsxs("button",{onClick:Se,className:"w-full flex items-center gap-4 py-4 border-b border-white/10",children:[e.jsx(ss,{className:"w-5 h-5 text-white/70"}),e.jsx("span",{className:"text-white text-[15px]",children:"Copy Profile Link"})]}),e.jsxs("button",{onClick:Fe,className:"w-full flex items-center gap-4 py-4 border-b border-white/10",children:[e.jsx(ts,{className:"w-5 h-5 text-white/70"}),e.jsx("span",{className:"text-white text-[15px]",children:"Block"})]}),e.jsxs("button",{onClick:Pe,className:"w-full flex items-center gap-4 py-4",children:[e.jsx(ls,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-red-400 text-[15px]",children:"Report"})]}),e.jsx("button",{onClick:()=>j(!1),className:"w-full py-4 mt-4 bg-white/10 rounded-xl text-white font-medium",children:"Cancel"})]})]})})}),e.jsx(P,{children:L&&e.jsx(We,{post:L,user:i,onBack:()=>z(null),onDeleted:Te,onUpdated:$e})}),e.jsx(Oe,{isOpen:ue,onClose:()=>W(!1),userId:t.telegram_id,currentUserId:i.telegram_id,type:he,onUserClick:B})]})}const rs=/\.(mp4|webm|mov|m4v)(\?|$)/i;function ns(t){return t.media_url?t.media_type?.toLowerCase().includes("video")?!0:rs.test(t.media_url):!1}function ne({post:t,showLock:i=!1}){const y=l.useRef(null),[k,m]=l.useState(!1),[B,o]=l.useState(!1),[x,u]=l.useState(!1),h=Ke(y,{minimumRatio:.25}),_=t.media_thumbnail||t.media_url,{isDataSaver:$}=He();Qe($?null:_);const f=ns(t);if(l.useEffect(()=>{h&&m(!0)},[h]),!t.media_url){const w=t.background_gradient||"from-purple-900/50 to-pink-900/50";return e.jsx("div",{ref:y,className:`w-full h-full flex items-center justify-center bg-gradient-to-br ${w} p-4`,children:e.jsx("p",{className:"text-[13px] text-white text-center line-clamp-5",children:t.content})})}return B?e.jsx("div",{ref:y,className:"w-full h-full flex items-center justify-center bg-[#1a1a1a]",children:e.jsx(as,{className:"w-8 h-8 text-white/20"})}):e.jsxs("div",{ref:y,className:"w-full h-full relative",children:[(!k||!x)&&e.jsx("div",{className:"absolute inset-0 bg-[#1a1a1a] animate-pulse"}),k&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:_||t.media_url,alt:"",className:`w-full h-full object-cover transition-opacity duration-200 ${x?"opacity-100":"opacity-0"} ${i?"blur-lg scale-110":""}`,loading:"lazy",onLoad:()=>u(!0),onError:()=>o(!0)}),i&&x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(V,{className:"w-6 h-6 text-white drop-shadow-lg"})}),x&&f&&!i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute bottom-1.5 left-1.5 flex items-center gap-0.5",children:[e.jsx(is,{className:"w-3 h-3 text-white fill-white"}),e.jsx("span",{className:"text-white text-[11px] font-medium",children:A(t.view_count||0)})]})]}),x&&t.media_urls&&t.media_urls.length>1&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"bg-black/50 rounded px-1.5 py-0.5",children:e.jsx("span",{className:"text-[11px] text-white font-medium",children:t.media_urls.length})})})]})]})}export{Es as default};
