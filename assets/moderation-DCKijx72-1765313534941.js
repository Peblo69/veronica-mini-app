const n="https://eigfbxjheuwxmtdfnvqc.supabase.co/functions/v1/ai-guardrail",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpZ2ZieGpoZXV3eG10ZGZudnFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0NDQ4NjEsImV4cCI6MjA4MDAyMDg2MX0.ilFCYkPxz8qJ3Yaw9Lt14JvdFlUsENKLYWXLYrHO8vA";async function e(a){const r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)});if(!r.ok){const t=await r.text();throw console.error("[Guardrail] Error:",r.status,t),new Error(t)}return r.json()}async function o(a){try{return(await e({type:"text",content:a}))?.result||null}catch{return null}}async function i(a){try{return(await e({type:"image",imageUrl:a}))?.result||null}catch{return null}}async function l(a,r){try{console.log("[Translate] Requesting translation to",r,":",a.slice(0,50));const t=await e({type:"translate",content:a,targetLanguage:r});if(console.log("[Translate] API response:",JSON.stringify(t)),t?.translated)return console.log("[Translate] Success:",t.translated.slice(0,50)),t.translated;throw console.warn("[Translate] No translation in response:",t),new Error("Translation service returned empty result")}catch(t){throw console.error("[Translate] Error:",t),t}}export{o as a,i as m,l as t};
