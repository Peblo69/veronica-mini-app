async function n(a){return console.warn("[Guardrail] Missing VITE_AI_GUARDRAIL_URL"),null}async function o(a){try{return(await n({type:"text",content:a}))?.result||null}catch{return null}}async function s(a){return new Promise((t,e)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=e,r.readAsDataURL(a)})}async function l(a){const e=await(await fetch(a)).blob();return s(e)}async function i(a){try{let t;return a instanceof File||a instanceof Blob?t=await s(a):a.startsWith("blob:")?t=await l(a):t=a,(await n({type:"image",imageUrl:t}))?.result||null}catch(t){return console.error("[moderateImage] Error:",t),null}}async function c(a,t){try{console.log("[Translate] Requesting translation to",t,":",a.slice(0,50));const e=await n({type:"translate",content:a,targetLanguage:t});if(console.log("[Translate] API response:",JSON.stringify(e)),e?.translated)return console.log("[Translate] Success:",e.translated.slice(0,50)),e.translated;throw console.warn("[Translate] No translation in response:",e),new Error("Translation service returned empty result")}catch(e){throw console.error("[Translate] Error:",e),e}}export{o as a,i as m,c as t};
