import{c as $,r as l,Y as Me,a3 as $e,Z as Ee,W as De,a4 as ze,j as e,C as T,m as r,A as M,X as ee,a5 as Ie,a6 as c,a7 as Le,a8 as Ae}from"./index-CDW6Jhyp-1765322654012.js";import{g as Ve,a as We,P as Re,u as He,s as Oe}from"./PostDetail-DqXE_HcY-1765322654012.js";import{G as te,B as se,F as Be}from"./FollowersSheet-0KYzokZ5-1765322654012.js";import{A as Ge}from"./arrow-left-CfdKCigK-1765322654012.js";import{E as qe}from"./ellipsis-B0N7w7TE-1765322654012.js";import{S as x}from"./star-D5RTd7dQ-1765322654012.js";import{C as Xe}from"./chart-column-DIBl-nAa-1765322654012.js";import{L as le}from"./lock-ChIyw6CM-1765322654012.js";import{U as ae}from"./users-BCF5cxRN-1765322654012.js";import{E as Ke}from"./eye-Cv63Yrrl-1765322654012.js";import{G as Ye}from"./gift-CWf023Dc-1765322654012.js";import{I as Ze}from"./image-Bf1lOxQa-1765322654012.js";import{V as Je}from"./video-C2XN-_Q9-1765322654012.js";import"./CommentsSheet-IqFM5Twr-1765322654012.js";import"./loader-circle-DkhQUoWh-1765322654012.js";import"./heart-DFoO2YKS-1765322654012.js";import"./trash-2-CymqSmcI-1765322654012.js";import"./volume-2-Bm099nX4-1765322654012.js";const Qe=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],ie=$("arrow-down-left",Qe);const Ue=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],re=$("arrow-up-right",Ue);const et=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],tt=$("trending-up",et);const st=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ne=$("wallet",st);function kt({creator:s,currentUser:i,onBack:E,onMessage:m,onUserUpdate:n,onViewProfile:D}){const[o,j]=l.useState("posts"),[b,N]=l.useState([]),[ce,O]=l.useState(!0),[u,w]=l.useState(null),[z,de]=l.useState(!1),[xe,d]=l.useState(s.followers_count||0),[me,he]=l.useState(s.following_count||0),[B,it]=l.useState(!1),[ue,I]=l.useState(!1),[p,v]=l.useState(null),[y,L]=l.useState(null),[_,A]=l.useState(!1),[k,G]=l.useState(!1),[S,q]=l.useState(!1),[X,rt]=l.useState(null),[pe,C]=l.useState(!1),[h,V]=l.useState(50),[K,Y]=l.useState(""),[P,W]=l.useState(!1),[F,be]=l.useState(null),[f,we]=l.useState([]),[Z,J]=l.useState(!1),[fe,R]=l.useState(!1),[ge,Q]=l.useState("followers");l.useEffect(()=>{Ne()},[s.telegram_id]),l.useEffect(()=>{const t=Me(s.telegram_id,{onNewFollower:g=>{g!==i.telegram_id&&d(H=>H+1)},onUnfollow:g=>{g!==i.telegram_id&&d(H=>Math.max(0,H-1))}}),a=$e(s.telegram_id,g=>{d(g.followers_count||0)});return()=>{t(),a()}},[s.telegram_id,i.telegram_id]),l.useEffect(()=>{o==="wallet"&&!F&&!Z&&je()},[o]);const je=async()=>{J(!0);try{const[t,a]=await Promise.all([Ve(s.telegram_id),We(s.telegram_id)]);t.wallet&&be(t.wallet),a.transactions&&we(a.transactions)}catch(t){console.error("Failed to load wallet data:",t)}J(!1)},Ne=async()=>{O(!0);const[t,a]=await Promise.all([Ee(s.telegram_id,i.telegram_id),De(s.telegram_id)]);N(t.posts),w(t.relationship.is_following),de(t.relationship.is_subscribed),d(a.followers),he(a.following),O(!1)},ve=async()=>{if(!S){q(!0);try{u?(w(!1),d(a=>Math.max(0,a-1)),n&&n({following_count:Math.max(0,(i.following_count||0)-1)}),await Ie(i.telegram_id,s.telegram_id)||(w(!0),d(a=>a+1),n&&n({following_count:i.following_count||0}),c.error("Failed to unfollow. Please try again."))):(w(!0),d(a=>a+1),n&&n({following_count:(i.following_count||0)+1}),await Le(i.telegram_id,s.telegram_id)||(w(!1),d(a=>Math.max(0,a-1)),n&&n({following_count:Math.max(0,i.following_count||0)}),c.error("Failed to follow. Please try again.")))}finally{q(!1)}}},ye=async()=>{I(!1),c.info("Subscription with Stars coming soon!")},_e=async t=>{A(!0),await He(i.telegram_id,t.id,()=>{N(b.map(a=>a.id===t.id?{...a,can_view:!0,is_purchased:!0}:a)),v(null),A(!1),c.success("Content unlocked!")},a=>{A(!1),c.error(a||"Purchase failed")})},ke=async()=>{if(h<1){c.error("Minimum tip is 1 Star");return}W(!0),await Oe(i.telegram_id,s.telegram_id,h,K||void 0,void 0,()=>{C(!1),V(50),Y(""),W(!1),c.success(`Sent ${h} Stars to ${s.first_name}!`)},t=>{W(!1),c.error(t||"Tip failed")})},Se=async()=>{if(!(!m||k)){G(!0);try{const t=await Ae(i.telegram_id,s.telegram_id,i.telegram_id);t?m(t.id):c.error("Could not start conversation. Please try again.")}catch(t){console.error("Failed to start chat:",t),c.error("Failed to start chat. Please try again.")}finally{G(!1)}}},Ce=t=>{t.can_view?L(t):t.unlock_price>0&&v(t)},Pe=()=>{y&&(N(b.filter(t=>t.id!==y.id)),L(null))},Fe=t=>{N(b.map(a=>a.id===t.id?{...t,can_view:a.can_view}:a))},U=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),Te=ze.createPortal(e.jsxs("div",{className:"fixed left-0 right-0 z-[100] bg-[#0c0c0c] border-b border-white/5 px-4 py-3 flex items-center justify-between",style:{top:"max(44px, calc(env(safe-area-inset-top, 0px) + 44px))"},children:[e.jsx("button",{onClick:E,children:e.jsx(Ge,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"font-bold text-lg flex items-center gap-1",children:[s.username||"user",s.is_verified&&e.jsx(T,{className:"w-3.5 h-3.5 text-blue-400 fill-blue-400"})]}),e.jsx("button",{children:e.jsx(qe,{className:"w-7 h-7 text-white"})})]}),document.body);return e.jsxs("div",{className:"bg-[#050505] min-h-full text-white",children:[Te,e.jsx("div",{style:{height:"52px"}}),e.jsxs("div",{className:"px-4 pt-5 pb-4 relative overflow-hidden",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-25",style:{backgroundImage:"radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.5), rgba(255,255,255,0)), radial-gradient(1px 1px at 70% 60%, rgba(255,255,255,0.4), rgba(255,255,255,0)), radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,0.35), rgba(255,255,255,0))"}}),e.jsx("div",{className:"pointer-events-none absolute -left-10 -top-10 w-48 h-48 rounded-full bg-blue-500/10 blur-3xl"}),e.jsx("div",{className:"pointer-events-none absolute right-0 top-10 w-40 h-40 rounded-full bg-purple-500/10 blur-3xl"}),e.jsxs("div",{className:"flex items-center gap-5 mb-6 relative z-10",children:[e.jsx("div",{className:"relative shrink-0",children:e.jsx("div",{className:"w-[72px] h-[72px] rounded-full p-[2px] bg-gradient-to-tr from-[#1f6fff] via-[#7aa4ff] to-[#1f6fff]/40 shadow-[0_8px_28px_rgba(31,111,255,0.25)]",children:e.jsx("img",{src:s.avatar_url||"https://i.pravatar.cc/150?u="+s.telegram_id,alt:s.first_name,className:"w-full h-full rounded-full object-cover border border-white/15"})})}),e.jsxs("div",{className:"flex-1 flex justify-around items-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[e.jsx("span",{className:"font-semibold text-[18px] leading-tight text-white",children:s.posts_count||0}),e.jsx("span",{className:"text-[12px] text-white/60",children:"Posts"})]}),e.jsxs("button",{className:"flex flex-col items-center gap-0.5 active:opacity-70 transition-opacity",onClick:()=>{Q("followers"),R(!0)},children:[e.jsx("span",{className:"font-semibold text-[18px] leading-tight text-white",children:U(xe)}),e.jsx("span",{className:"text-[12px] text-white/60",children:"Followers"})]}),e.jsxs("button",{className:"flex flex-col items-center gap-0.5 active:opacity-70 transition-opacity",onClick:()=>{Q("following"),R(!0)},children:[e.jsx("span",{className:"font-semibold text-[18px] leading-tight text-white",children:U(me)}),e.jsx("span",{className:"text-[12px] text-white/60",children:"Following"})]})]})]}),e.jsxs("div",{className:"mb-5 relative z-10",children:[e.jsxs("div",{className:"font-bold text-sm mb-0.5 text-white flex items-center gap-2",children:[s.first_name," ",s.last_name]}),s.is_creator&&e.jsx("div",{className:"text-xs text-blue-300 mb-1",children:"Digital Creator"}),e.jsx("div",{className:"text-sm whitespace-pre-wrap leading-snug text-white/80",children:s.bio||"No bio yet."})]}),e.jsxs("div",{className:"flex gap-2 mb-4 relative z-10",children:[e.jsx("button",{className:`flex-1 text-sm font-semibold py-2 rounded-lg transition-colors border ${u===null||S?"bg-white/5 border-white/10 text-white/50":u?"bg-white/10 border-white/10 text-white":"bg-blue-500 border-blue-500 text-white"}`,onClick:ve,disabled:u===null||S,children:u===null||S?e.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white/30 border-t-white/70 rounded-full animate-spin"}):u?"Following":"Follow"}),e.jsx("button",{className:`flex-1 text-sm font-semibold py-2 rounded-lg transition-colors border ${k?"bg-white/5 border-white/10 text-white/50":"bg-white/10 hover:bg-white/15 border-white/10 text-white"}`,onClick:Se,disabled:k,children:k?e.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white/30 border-t-white/70 rounded-full animate-spin"}):"Message"}),s.is_creator&&e.jsx("button",{className:`flex-1 text-sm font-semibold py-2 rounded-lg transition-colors border ${z?"bg-green-500/20 border-green-500/30 text-green-400":"bg-white/10 border-white/10 text-white"}`,onClick:()=>!z&&I(!0),children:z?"Subscribed":"Subscribe"})]}),s.is_creator&&s.telegram_id!==i.telegram_id&&e.jsxs("button",{className:"w-full mb-4 py-2.5 bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-sm font-bold rounded-lg flex items-center justify-center gap-2 hover:opacity-90 transition-opacity relative z-10",onClick:()=>C(!0),children:[e.jsx(x,{className:"w-4 h-4 fill-current"}),"Send a Tip"]})]}),e.jsxs("div",{className:"flex border-t border-white/5 bg-[#080808] sticky top-[56px] z-40",children:[e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center border-b-[2px] transition-colors ${o==="posts"?"border-blue-500 text-white":"border-transparent text-white/50"}`,onClick:()=>j("posts"),children:e.jsx(te,{className:"w-5 h-5"})}),e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center border-b-[2px] transition-colors ${o==="saved"?"border-blue-500 text-white":"border-transparent text-white/50"}`,onClick:()=>j("saved"),children:e.jsx(se,{className:"w-5 h-5"})}),e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center border-b-[2px] transition-colors ${o==="wallet"?"border-blue-500 text-white":"border-transparent text-white/50"}`,onClick:()=>j("wallet"),children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsx("button",{className:`flex-1 py-3 flex items-center justify-center border-b-[2px] transition-colors ${o==="stats"?"border-blue-500 text-white":"border-transparent text-white/50"}`,onClick:()=>j("stats"),children:e.jsx(Xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"pb-28 bg-[#050505]",children:[o==="posts"&&(ce?e.jsx("div",{className:"grid grid-cols-3 gap-[2px] px-[2px]",children:[1,2,3,4,5,6].map(t=>e.jsx("div",{className:"aspect-square bg-white/5 animate-pulse rounded-sm"},t))}):b.length===0?e.jsxs("div",{className:"py-20 text-center text-white",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border border-white/10 flex items-center justify-center mx-auto mb-4 bg-white/5",children:e.jsx(te,{className:"w-7 h-7 text-white/70"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"No posts yet"})]}):e.jsx("div",{className:"grid grid-cols-3 gap-[2px] px-[2px]",children:b.map(t=>e.jsxs(r.div,{className:"relative aspect-square cursor-pointer overflow-hidden bg-white/5",whileTap:{opacity:.9},onClick:()=>Ce(t),children:[e.jsx(at,{post:t}),!t.can_view&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(le,{className:"w-5 h-5 text-white drop-shadow-md"})})]},t.id))})),o==="saved"&&e.jsxs("div",{className:"py-20 text-center text-white",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border border-white/10 flex items-center justify-center mx-auto mb-4 bg-white/5",children:e.jsx(se,{className:"w-7 h-7 text-white/70"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Highlights"}),e.jsx("p",{className:"text-sm text-white/60 max-w-xs mx-auto",children:"Creator's saved content and highlights"})]}),o==="wallet"&&(Z?e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsx("div",{className:"h-24 bg-white/5 animate-pulse rounded-xl"}),e.jsx("div",{className:"h-16 bg-white/5 animate-pulse rounded-xl"}),e.jsx("div",{className:"h-16 bg-white/5 animate-pulse rounded-xl"})]}):e.jsxs("div",{className:"p-3 space-y-3 relative",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-4 left-8 w-1 h-1 bg-yellow-400/40 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute top-12 right-12 w-0.5 h-0.5 bg-yellow-300/30 rounded-full"}),e.jsx("div",{className:"absolute top-24 left-16 w-0.5 h-0.5 bg-white/20 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),e.jsx("div",{className:"absolute top-32 right-8 w-1 h-1 bg-yellow-400/25 rounded-full"}),e.jsx("div",{className:"absolute top-48 left-6 w-0.5 h-0.5 bg-yellow-300/35 rounded-full animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-56 right-20 w-0.5 h-0.5 bg-white/15 rounded-full"})]}),e.jsxs("div",{className:"relative bg-[#0a0a0f] border border-white/5 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/50 text-xs font-medium uppercase tracking-wide",children:"Balance"}),e.jsx(x,{className:"w-4 h-4 text-yellow-500/70"})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-3",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:F?.stars_balance||0}),e.jsx("span",{className:"text-white/40 text-sm",children:"Stars"})]}),e.jsx(r.button,{whileTap:{scale:.98},className:"w-full py-2 bg-white/10 hover:bg-white/15 text-white text-sm font-medium rounded-lg border border-white/5 transition-colors",children:"Cash Out"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-[#0a0a0f] border border-white/5 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(ie,{className:"w-3 h-3 text-emerald-500/70"}),e.jsx("span",{className:"text-white/40 text-[10px] uppercase tracking-wide",children:"Earned"})]}),e.jsx("span",{className:"text-lg font-semibold text-white",children:F?.total_earned||0})]}),e.jsxs("div",{className:"bg-[#0a0a0f] border border-white/5 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(re,{className:"w-3 h-3 text-white/40"}),e.jsx("span",{className:"text-white/40 text-[10px] uppercase tracking-wide",children:"Spent"})]}),e.jsx("span",{className:"text-lg font-semibold text-white",children:F?.total_spent||0})]})]}),e.jsxs("div",{className:"bg-[#0a0a0f] border border-white/5 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"px-3 py-2 border-b border-white/5",children:e.jsx("h3",{className:"text-xs font-medium text-white/60 uppercase tracking-wide",children:"Transactions"})}),f.length===0?e.jsxs("div",{className:"py-6 text-center",children:[e.jsx(ne,{className:"w-6 h-6 text-white/20 mx-auto mb-1"}),e.jsx("p",{className:"text-white/30 text-xs",children:"No transactions yet"})]}):e.jsx("div",{className:"divide-y divide-white/5",children:f.slice(0,5).map(t=>e.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${t.to_user_id===s.telegram_id?"bg-emerald-500/10":"bg-white/5"}`,children:t.to_user_id===s.telegram_id?e.jsx(ie,{className:"w-3 h-3 text-emerald-500/70"}):e.jsx(re,{className:"w-3 h-3 text-white/40"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-xs font-medium capitalize",children:t.type}),e.jsx("p",{className:"text-white/30 text-[10px]",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("span",{className:`text-xs font-medium ${t.to_user_id===s.telegram_id?"text-emerald-500/80":"text-white/50"}`,children:[t.to_user_id===s.telegram_id?"+":"-",t.amount]})]},t.id))})]}),s.is_creator&&e.jsxs("div",{className:"bg-[#0a0a0f] border border-white/5 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-white/5 flex items-center gap-1.5",children:[e.jsx(ae,{className:"w-3 h-3 text-white/40"}),e.jsx("h3",{className:"text-xs font-medium text-white/60 uppercase tracking-wide",children:"Supporters"})]}),f.filter(t=>t.to_user_id===s.telegram_id).length===0?e.jsx("div",{className:"py-5 text-center",children:e.jsx("p",{className:"text-white/30 text-xs",children:"No supporters yet"})}):e.jsx("div",{className:"px-3 py-2",children:e.jsxs("p",{className:"text-white/50 text-xs",children:[f.filter(t=>t.to_user_id===s.telegram_id&&t.type==="subscription").length," subscribers, "," ",f.filter(t=>t.to_user_id===s.telegram_id&&t.type==="tip").length," tips"]})})]})]})),o==="stats"&&e.jsxs("div",{className:"p-3 relative",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-6 left-10 w-1 h-1 bg-purple-400/30 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute top-16 right-8 w-0.5 h-0.5 bg-pink-300/25 rounded-full"}),e.jsx("div",{className:"absolute top-28 left-6 w-0.5 h-0.5 bg-white/15 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),e.jsx("div",{className:"absolute top-40 right-16 w-1 h-1 bg-purple-400/20 rounded-full"}),e.jsx("div",{className:"absolute top-52 left-20 w-0.5 h-0.5 bg-pink-300/30 rounded-full animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-[#0a0a0f] border border-white/5",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 blur-sm",children:e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"h-20 bg-white/10 rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[e.jsx("div",{className:"h-12 bg-white/10 rounded"}),e.jsx("div",{className:"h-12 bg-white/10 rounded"}),e.jsx("div",{className:"h-12 bg-white/10 rounded"})]})]})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center py-6 px-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 border border-white/10 flex items-center justify-center mb-3",children:e.jsx(le,{className:"w-5 h-5 text-white/70"})}),e.jsx("h3",{className:"text-base font-semibold text-white mb-1",children:"Pro Analytics"}),e.jsx("p",{className:"text-white/40 text-xs text-center mb-4 max-w-[240px]",children:"Unlock insights about views, reach, and audience"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4 w-full max-w-[260px]",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Ke,{className:"w-4 h-4 text-white/30 mx-auto mb-0.5"}),e.jsx("span",{className:"text-white/30 text-[10px]",children:"Views"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(tt,{className:"w-4 h-4 text-white/30 mx-auto mb-0.5"}),e.jsx("span",{className:"text-white/30 text-[10px]",children:"Reach"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"w-4 h-4 text-white/30 mx-auto mb-0.5"}),e.jsx("span",{className:"text-white/30 text-[10px]",children:"Audience"})]})]}),e.jsxs(r.button,{whileTap:{scale:.98},className:"px-4 py-2 bg-white/10 hover:bg-white/15 text-white text-sm font-medium rounded-lg border border-white/5 flex items-center gap-1.5 transition-colors",children:[e.jsx(x,{className:"w-3.5 h-3.5 text-yellow-500/70"}),e.jsx("span",{children:"Upgrade to Pro"})]}),e.jsx("p",{className:"text-white/25 text-[10px] mt-2",children:"99 Stars/month"})]})]})]})]}),e.jsx(M,{children:ue&&e.jsx(r.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(!1),children:e.jsx(r.div,{className:"bg-[#1c1c1e] rounded-[2rem] w-full max-w-sm p-6 shadow-2xl border border-white/10",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"p-2 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-full p-1 border-2 border-purple-500 mb-4",children:e.jsx("img",{src:s.avatar_url||"https://i.pravatar.cc/150?u="+s.telegram_id,alt:s.first_name,className:"w-full h-full rounded-full object-cover"})}),e.jsxs("h3",{className:"text-xl font-bold mb-1 text-white",children:["Subscribe to ",s.first_name]}),e.jsx("p",{className:"text-white/50 text-sm mb-6",children:"Unlock exclusive posts and more"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-left text-white/80",children:[e.jsx(T,{className:"w-5 h-5 text-green-500 shrink-0"}),e.jsx("span",{children:"Full access to exclusive content"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-left text-white/80",children:[e.jsx(T,{className:"w-5 h-5 text-green-500 shrink-0"}),e.jsx("span",{children:"Direct messaging"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-left text-white/80",children:[e.jsx(T,{className:"w-5 h-5 text-green-500 shrink-0"}),e.jsx("span",{children:"Support the creator directly"})]})]}),X&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:X}),e.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold rounded-xl disabled:opacity-50",onClick:ye,disabled:B||(s.subscription_price||0)>0&&i.balance<(s.subscription_price||0),children:B?"Processing...":`Subscribe for ${s.subscription_price||"Free"} Stars`})]})})})}),e.jsx(M,{children:p&&!p.can_view&&p.unlock_price>0&&e.jsx(r.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>!_&&v(null),children:e.jsxs(r.div,{className:"bg-[#1c1c1e] rounded-[2rem] w-full max-w-sm p-6 shadow-2xl border border-white/10",initial:{scale:.9,y:30,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:30,opacity:0},transition:{type:"spring",duration:.5},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Unlock Content"}),e.jsx("button",{onClick:()=>!_&&v(null),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(ee,{className:"w-6 h-6 text-gray-400"})})]}),e.jsxs("div",{className:"text-center mb-8 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-500/20 blur-3xl rounded-full"}),e.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(x,{className:"w-10 h-10 text-white fill-white"})}),e.jsx("p",{className:"text-gray-400 text-sm font-medium mb-2",children:"Pay with Telegram Stars"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(x,{className:"w-6 h-6 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-4xl font-bold text-white tracking-tight",children:Math.ceil(p.unlock_price)})]})]}),e.jsx("div",{className:"bg-white/5 rounded-2xl p-4 mb-6 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatar_url||`https://i.pravatar.cc/150?u=${s.telegram_id}`,className:"w-10 h-10 rounded-full object-cover",alt:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:s.first_name||s.username}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Creator receives 85%"})]})]})}),e.jsx(r.button,{className:"w-full py-4 rounded-2xl font-bold text-[15px] flex items-center justify-center gap-2 shadow-lg transition-all bg-gradient-to-r from-yellow-400 to-orange-500 text-black",whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},onClick:()=>_e(p),disabled:_,children:_?e.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-5 h-5 fill-current"}),"Pay ",Math.ceil(p.unlock_price)," Stars"]})}),e.jsx("p",{className:"text-center text-gray-500 text-xs mt-4",children:"Payment powered by Telegram Stars"})]})})}),e.jsx(M,{children:pe&&e.jsx(r.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>!P&&C(!1),children:e.jsxs(r.div,{className:"bg-[#1c1c1e] rounded-[2rem] w-full max-w-sm p-6 shadow-2xl border border-white/10",initial:{scale:.9,y:30,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:30,opacity:0},transition:{type:"spring",duration:.5},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Send a Tip"}),e.jsx("button",{onClick:()=>!P&&C(!1),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(ee,{className:"w-6 h-6 text-gray-400"})})]}),e.jsxs("div",{className:"text-center mb-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-500/20 blur-3xl rounded-full"}),e.jsx("div",{className:"relative w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(Ye,{className:"w-8 h-8 text-white"})}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Show your support to ",s.first_name]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[10,50,100,250].map(t=>e.jsx("button",{className:`py-2 rounded-xl text-sm font-semibold transition-all ${h===t?"bg-gradient-to-r from-yellow-400 to-orange-500 text-black":"bg-white/10 text-white hover:bg-white/20"}`,onClick:()=>V(t),children:t},t))}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-yellow-400 fill-yellow-400"}),e.jsx("input",{type:"number",value:h,onChange:t=>V(Math.max(1,parseInt(t.target.value)||1)),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400",placeholder:"Enter amount",min:"1"})]}),e.jsx("input",{type:"text",value:K,onChange:t=>Y(t.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400 mb-6",placeholder:"Add a message (optional)",maxLength:100}),e.jsx(r.button,{className:"w-full py-4 rounded-2xl font-bold text-[15px] flex items-center justify-center gap-2 shadow-lg transition-all bg-gradient-to-r from-yellow-400 to-orange-500 text-black",whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},onClick:ke,disabled:P||h<1,children:P?e.jsx("div",{className:"w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-5 h-5 fill-current"}),"Send ",h," Stars"]})}),e.jsx("p",{className:"text-center text-gray-500 text-xs mt-4",children:"Creator receives 85% of your tip"})]})})}),e.jsx(M,{children:y&&e.jsx(Re,{post:y,user:i,onBack:()=>L(null),onDeleted:Pe,onUpdated:Fe})}),e.jsx(Be,{isOpen:fe,onClose:()=>R(!1),userId:s.telegram_id,currentUserId:i.telegram_id,type:ge,onUserClick:D})]})}const lt=/\.(mp4|webm|mov|m4v)(\?|$)/i;function oe(s){return s.media_type==="video"?!0:s.media_url?lt.test(s.media_url):!1}function at({post:s}){const[i,E]=l.useState(!1),[m,n]=l.useState(!1),D=s.media_thumbnail||s.media_url;return s.media_url?i?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/5",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{className:"w-6 h-6 text-white/30 mx-auto mb-1"}),e.jsx("p",{className:"text-[9px] text-white/30",children:"Failed to load"})]})}):e.jsxs("div",{className:"w-full h-full relative",children:[!m&&e.jsx("div",{className:"absolute inset-0 bg-white/5 animate-pulse"}),e.jsx("img",{src:D||s.media_url,alt:"",className:`w-full h-full object-cover transition-opacity duration-200 ${m?"opacity-100":"opacity-0"} ${s.can_view?"":"blur-md scale-110"}`,loading:"lazy",onLoad:()=>n(!0),onError:()=>E(!0)}),m&&oe(s)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-1 right-1 bg-black/60 rounded-full p-1",children:e.jsx(Je,{className:"w-3.5 h-3.5 text-white"})})]}),m&&!oe(s)&&s.media_urls&&s.media_urls.length>1&&e.jsx("div",{className:"absolute top-1 right-1 bg-black/60 rounded-full px-1.5 py-0.5",children:e.jsx("span",{className:"text-[9px] text-white font-medium",children:s.media_urls.length})})]}):e.jsx("div",{className:`w-full h-full flex items-center justify-center bg-white/5 p-3 ${s.can_view?"":"blur-sm"}`,children:e.jsx("p",{className:"text-[10px] text-white/70 text-center line-clamp-4",children:s.content})})}export{kt as default};
